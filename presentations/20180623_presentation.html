

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta content="default-src 'none'; script-src 'self' https://cdnjs.cloudflare.com 'unsafe-inline'; connect-src 'self'; img-src 'self'; style-src 'self'; font-src 'self'; form-action 'self'; frame-ancestors 'none'; base-uri 'self'" http-equiv="Content-Security-Policy" />
<meta content="nosniff" http-equiv="X-Content-Type-Options" />
<meta content="deny" http-equiv="X-Frame-Options" />
<meta content="1; mode=block" http-equiv="X-XSS-Protection" />
<meta content="strict-origin" http-equiv="Referrer-Policy" />
<meta content="max-age=31536000; includeSubDomains" http-equiv="Strict-Transport-Security" />
<meta content="'*'" http-equiv="Access-Control-Allow-Origin" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>11.9. 2018-06-23 Links, PentesterLab, AWS EC2 &mdash; South Bay WASP 1.0.3 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="11.10. 2018-06-16 Links, VMs/Containers, and AES/SHA" href="20180616_presentation.html" />
    <link rel="prev" title="11.8. 2018-06-30 Links, home routers, PentesterLab SQLi" href="20180630_presentation.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> South Bay WASP
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../pentest_intro.html">1. South Bay WASP Meetup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pentest_kali.html">2. Kali Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pentest_challenges.html">3. Pentest Challenges</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pentest_encryption.html">4. Encryption</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pentest_html.html">5. HTML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pentest_network_tools.html">6. Pentest Network Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pentest_recon.html">7. Pentest Reconnaisance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pentest_study.html">8. Pentest Study</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pentest_buffer_overflow.html">9. Pentest Buffer Overflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pentest_scripting.html">10. Pentest scripting</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../pentest_presentations.html">11. Pentest Presentations</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="20180818_presentation.html">11.1. 2018-08-18 Links, flaws.cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180811_presentation.html">11.2. 2018-08-11 Links, flaws.cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180804_presentation.html">11.3. 2018-08-04 Links, AWS S3</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180728_presentation.html">11.4. 2018-07-28 Links, AWS VPC</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180721_presentation.html">11.5. 2018-07-21 Links, HTML vs HTTPS, AWS Training and Certification</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180714_presentation.html">11.6. 2018-07-14 Links, jq, and MoinMoin code execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180707_presentation.html">11.7. 2018-07-07 Links, cloud logging, PentesterLab SQLi II</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180630_presentation.html">11.8. 2018-06-30 Links, home routers, PentesterLab SQLi</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">11.9. 2018-06-23 Links, PentesterLab, AWS EC2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#links-and-updates-this-week">11.9.1. Links and updates this week</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#links-around-the-web">11.9.1.1. Links around the web</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#study-this-week">11.9.2. Study this week</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pentesterlab">11.9.2.1. PentesterLab</a></li>
<li class="toctree-l4"><a class="reference internal" href="#aws-ec2-instances">11.9.2.2. AWS EC2 instances</a></li>
<li class="toctree-l4"><a class="reference internal" href="#aws-cli">11.9.2.3. AWS CLI</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="20180616_presentation.html">11.10. 2018-06-16 Links, VMs/Containers, and AES/SHA</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180609_presentation.html">11.11. 2018-06-09 Links, VMs/Containers, and Cryptography</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180602_presentation.html">11.12. 2018-06-02 Links, Containers, and Cryptography</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180526_presentation.html">11.13. 2018-05-26 Links, Containers, and Cryptography</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180519_presentation.html">11.14. 2018-05-19 Links, Containers, and Cryptography</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180512_presentation.html">11.15. 2018-05-12 Links, Containers, and Cryptography</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180505_presentation.html">11.16. 2018-05-05 Links, Containers, and Cryptography</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180428_presentation.html">11.17. 2018-04-28 Links, Containers, and Cryptography</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180421_presentation.html">11.18. 2018-04-21 Links, 2FA, and Cryptography</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180414_presentation.html">11.19. 2018-04-14 Links and Cryptography</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180407_presentation.html">11.20. 2018-04-07 Links, nmap, and Cryptography</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180331_presentation.html">11.21. 2018-03-31 Links, TLS 1.3, and Cryptography</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180303_presentation.html">11.22. 2018-03-03 Links, Cloud VMs, OpenSSL, Metasploit Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180224_presentation.html">11.23. 2018-02-24 Links, Cloud VMs, Let’s Encrypt, Metasploit Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180217_presentation.html">11.24. 2018-02-17 Links, Web frontend, and Malware C2</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180210_presentation.html">11.25. 2018-02-10 Links, memory issues, and WAF</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180203_presentation.html">11.26. 2018-02-03 Links and more ROP</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180127_presentation.html">11.27. 2018-01-27 Links and ROP</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180120_presentation.html">11.28. 2018-01-20 Links and yet more Meltdown/Spectre</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180113_presentation.html">11.29. 2018-01-13 Links and more Meltdown/Spectre</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170812_presentation.html">11.30. 2017-08-12 VRT, cryptography, TLS 1.3, Broadpwn, cURL, and phishing</a></li>
<li class="toctree-l2"><a class="reference internal" href="20180106_presentation.html">11.31. 2018-01-06 Invisibly fingerprinting text, Samsung no-SOP, Meltdown/Spectre</a></li>
<li class="toctree-l2"><a class="reference internal" href="20171230_presentation.html">11.32. 2017-12-30 gohttp, hardening C/C++, Linux waitid() exploit</a></li>
<li class="toctree-l2"><a class="reference internal" href="20171223_presentation.html">11.33. 2017-12-23 Haven, Observatory, and Janus</a></li>
<li class="toctree-l2"><a class="reference internal" href="20171216_presentation.html">11.34. 2017-12-16 Mozilla Observatory</a></li>
<li class="toctree-l2"><a class="reference internal" href="20171209_presentation.html">11.35. 2017-12-09 Phone tracking, AWS leaks, macOS root, exim</a></li>
<li class="toctree-l2"><a class="reference internal" href="20171202_presentation.html">11.36. 2017-12-02 Static websites, IME follow-up</a></li>
<li class="toctree-l2"><a class="reference internal" href="20171125_presentation.html">11.37. 2017-11-25 Not getting hacked, keystrokes, tracking, Fancy Bear, Intel ME</a></li>
<li class="toctree-l2"><a class="reference internal" href="20171118_presentation.html">11.38. 2017-11-18 Privacy, safe languages, Linux networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="20171111_presentation.html">11.39. 2017-11-11 PKP removal, exploits galore</a></li>
<li class="toctree-l2"><a class="reference internal" href="20171104_presentation.html">11.40. 2017-11-04 Cloud providers other than AWS</a></li>
<li class="toctree-l2"><a class="reference internal" href="20171028_presentation.html">11.41. 2017-10-28 IPv6 ULA, DHCPv6, /64 prefixes, Bad Rabbit</a></li>
<li class="toctree-l2"><a class="reference internal" href="20171021_presentation.html">11.42. 2017-10-21 IPv6 addressing, KRACK, Infineon RSA</a></li>
<li class="toctree-l2"><a class="reference internal" href="20171014_presentation.html">11.43. 2017-10-14 Firewalls, building vulnerable hosts</a></li>
<li class="toctree-l2"><a class="reference internal" href="20171007_presentation.html">11.44. 2017-10-07 QEMU virtualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170930_presentation.html">11.45. 2017-09-30 virtualization and bridges</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170923_presentation.html">11.46. 2017-09-23 nftables</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170916_presentation.html">11.47. 2017-09-16 “VPN”</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170909_presentation.html">11.48. 2017-09-09 Adding IPv6 on the EdgeRouter Lite</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170826_presentation.html">11.49. 2017-08-26 Complexity, Cookies vs Tokens</a></li>
<li class="toctree-l2"><a class="reference internal" href="20170819_presentation.html">11.50. 2017-08-19 Forcing HTTPS, HTTP forwarding</a></li>
<li class="toctree-l2"><a class="reference internal" href="http_headers.html">11.51. 2017-08-05 Attacking via HTTP Headers</a></li>
<li class="toctree-l2"><a class="reference internal" href="mitm.html">11.52. MitM Presentation</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">South Bay WASP</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../pentest_presentations.html">11. Pentest Presentations</a> &raquo;</li>
        
      <li>11.9. 2018-06-23 Links, PentesterLab, AWS EC2</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/presentations/20180623_presentation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="links-pentesterlab-aws-ec2">
<h1>11.9. 2018-06-23 Links, PentesterLab, AWS EC2<a class="headerlink" href="#links-pentesterlab-aws-ec2" title="Permalink to this headline">¶</a></h1>
<div class="section" id="links-and-updates-this-week">
<h2>11.9.1. Links and updates this week<a class="headerlink" href="#links-and-updates-this-week" title="Permalink to this headline">¶</a></h2>
<div class="section" id="links-around-the-web">
<h3>11.9.1.1. Links around the web<a class="headerlink" href="#links-around-the-web" title="Permalink to this headline">¶</a></h3>
<div class="section" id="cloud">
<h4>11.9.1.1.1. Cloud<a class="headerlink" href="#cloud" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><a class="reference external" href="http://aboutdfir.com/cloud-exposure-dlp-ir-a-z/">CLOUD EXPOSURE, DLP &amp; IR, A-Z</a></li>
<li><a class="reference external" href="https://blog.cloudthat.com/sample-questions-for-amazon-web-services-certified-solution-architect-certification-aws-architect-certification-part-i/">Sample Questions for Amazon Web Services Certified Solution Architect Certification (AWS Architect Certification) – Part I</a>, <a class="reference external" href="https://blog.cloudthat.com/sample-questions-for-amazon-web-services-certified-solution-architect-certification-aws-architect-certification-part-ii/">Sample Questions for Amazon Web Services Certified Solution Architect Certification (AWS Architect Certification) – Part II</a>, and <a class="reference external" href="https://blog.cloudthat.com/preparing-for-amazon-web-services-certified-solution-architect-certification-aws-architect-certification/">Preparing for Amazon Web Services Certified Solutions Architect Certification (AWS Architect Certification)</a></li>
<li><a class="reference external" href="https://mobile.nytimes.com/2018/06/20/technology/personaltech/firefox-chrome-browser-privacy.html">Firefox Is Back. It’s Time to Give It a Try</a></li>
</ol>
</div>
<div class="section" id="tech">
<h4>11.9.1.1.2. Tech<a class="headerlink" href="#tech" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><a class="reference external" href="https://www.recordedfuture.com/no-distribute-scanners/">Uncover Unseen Malware Samples With No Distribute Scanners</a> and <a class="reference external" href="https://www.bleepingcomputer.com/news/security/75-percent-of-malware-uploaded-on-no-distribute-scanners-is-unknown-to-researchers/">75% of Malware Uploaded on “No-Distribute” Scanners Is Unknown to Researchers</a></li>
<li><a class="reference external" href="https://arstechnica.com/tech-policy/2018/06/ex-cia-engineer-indicted-on-several-new-charges-connected-to-vault-7-leak/">Man who allegedly gave Vault 7 cache to WikiLeaks busted by poor opsec</a></li>
<li><a class="reference external" href="http://www.circleid.com/posts/20180619_why_you_must_learn_to_love_dnssec/">Why You Must Learn to Love DNSSEC</a></li>
<li><a class="reference external" href="https://www.bleepingcomputer.com/news/security/openbsd-disables-intel-cpu-hyper-threading-due-to-security-concerns/">OpenBSD Disables Intel CPU Hyper-Threading Due to Security Concerns</a></li>
<li><a class="reference external" href="https://arxiv.org/pdf/1806.05179.pdf">SafeSpec: Banishing the Spectre of a Meltdown with Leakage-Free Speculation</a></li>
<li><a class="reference external" href="https://spectreattack.com/spectre.pdf">Spectre Attacks: Exploiting Speculative Execution</a></li>
</ol>
</div>
<div class="section" id="tools">
<h4>11.9.1.1.3. Tools<a class="headerlink" href="#tools" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><a class="reference external" href="https://github.com/francisck/DanderSpritz_lab">DanderSpritz Lab</a> - allow researchers and defenders to quickly stand up a fully functional version of DanderSpritz - <a class="reference external" href="https://www.youtube.com/watch?v=Zqw-T1YQKUQ">The Equation Group’s Post exploitation tool-set</a> and a Windows Server 2008 Domain and client as targets.</li>
<li><a class="reference external" href="https://blog.netspi.com/tokenvator-a-tool-to-elevate-privilege-using-windows-tokens/">Tokenvator: A Tool to Elevate Privilege using Windows Tokens</a></li>
<li><a class="reference external" href="https://github.com/trimstray/sslmerge">Sslmerge</a> - open source tool to help you build a valid SSL certificate chain.</li>
<li><a class="reference external" href="https://github.com/Prodicode/ARPPD">ARPPD</a> - provide protection against malicious ARP attacks, changing the gateway’s MAC Address in the ARP table of a victim’s PC.</li>
<li><a class="reference external" href="https://thehackernews.com/2018/06/android-biometric-authentication.html">Android Gets New Anti-Spoofing Feature to Make Biometric Authentication Secure</a></li>
<li><a class="reference external" href="https://www.pyimagesearch.com/2018/06/18/face-recognition-with-opencv-python-and-deep-learning/">Face recognition with OpenCV, Python, and deep learning</a></li>
<li><a class="reference external" href="http://www.r2d3.us/">A Visual Introduction to Machine Learning</a></li>
<li><a class="reference external" href="https://awni.github.io/pytorch-tensorflow/">PyTorch or TensorFlow?</a></li>
<li><a class="reference external" href="https://www.tinkercad.com/">Tinkercad</a></li>
</ol>
</div>
<div class="section" id="study-links">
<h4>11.9.1.1.4. Study links<a class="headerlink" href="#study-links" title="Permalink to this headline">¶</a></h4>
<ol class="arabic">
<li><p class="first"><a class="reference external" href="https://medium.com/&#64;cachemoney/using-a-github-app-to-escalate-to-an-organization-owner-for-a-10-000-bounty-4ec307168631">Using a GitHub app to escalate to an organization owner for a $10,000 bounty</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://medium.com/&#64;brannondorsey/attacking-private-networks-from-the-internet-with-dns-rebinding-ea7098a2d325">Attacking Private Networks from the Internet with DNS Rebinding</a>, <a class="reference external" href="https://www.bleepingcomputer.com/news/security/google-roku-sonos-to-fix-dns-rebinding-attack-vector/">Google, Roku, Sonos to Fix DNS Rebinding Attack Vector</a>, and <a class="reference external" href="https://en.wikipedia.org/wiki/DNS_rebinding">DNS rebinding</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://jakearchibald.com/2018/i-discovered-a-browser-bug/">I discovered a browser bug</a></p>
<p>I’ve covered two browser security issues here, but these bugs started when browsers implemented range requests for media elements, which wasn’t covered by the standard. These range requests were genuinely useful, so all browsers did it by copying each others behaviour, but no one integrated it into the standard.</p>
<p>The result is the browsers all behave slightly differently, and some ended up with security issues.</p>
</li>
<li><p class="first"><a class="reference external" href="https://letsencrypt.org/docs/certificates-for-localhost/">Certificates for localhost</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://labs.nettitude.com/blog/cve-2018-10956-unauthenticated-privileged-directory-traversal-in-ipconfigure-orchid-core-vms/">CVE-2018-10956: Unauthenticated Privileged Directory Traversal in IPConfigure Orchid Core VMS</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://medium.com/tenable-techblog/reverse-shell-from-an-openvpn-configuration-file-73fd8b1d38da">Reverse Shell from an OpenVPN Configuration File</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://blog.vulnspy.com/2018/06/21/phpMyAdmin-4-8-x-Authorited-CLI-to-RCE/">phpMyAdmin 4.8.x LFI to RCE (Authorization Required)</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://hansesecure.de/backdooring-pe-file-with-aslr/">Backdooring PE-File (with ASLR)</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://www.avanan.com/resources/zerofont-phishing-attack">Font Size to Get Past Office 365 Security</a> and <a class="reference external" href="https://thehackernews.com/2018/06/email-phishing-protection.html">Email Phishers Using a Simple Way to Bypass MS Office 365 Protection</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://rhinosecuritylabs.com/aws/aws-privilege-escalation-methods-mitigation/">Intro: AWS Privilege Escalation Vulnerabilities</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://www.crowdstrike.com/blog/hiding-in-plain-sight-using-the-office-365-activities-api-to-investigate-business-email-compromises/">Hiding in Plain Sight: Using the Office 365 Activities API to Investigate Business Email Compromises</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://www.youtube.com/user/defconswitzerland/videos">DEFCON Switzerland Videos</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://www.megabeets.net/decrypting-dropshot-with-radare2-and-cutter-part-1/">Decrypting APT33’s Dropshot Malware with Radare2 and Cutter – Part 1</a> and <a class="reference external" href="https://www.megabeets.net/decrypting-dropshot-with-radare2-and-cutter-part-2/">Decrypting APT33’s Dropshot Malware with Radare2 and Cutter – Part 2</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://www.sxcurity.pro/advanced-cors-techniques/">Advanced CORS Exploitation Techniques</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/OWASP/owasp-mstg">OWASP Mobile Security Testing Guide</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://www.mdsec.co.uk/2018/06/exploring-powershell-amsi-and-logging-evasion/">Exploring PowerShell AMSI and Logging Evasion</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://blog.sucuri.net/2018/06/magento-credit-card-stealer-reinfector.html">Magento Credit Card Stealer Reinfector</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://zerosum0x0.blogspot.com/2018/06/dissecting-bug-in-eternalromance-client.html">Dissecting a Bug in the EternalRomance Client (FuzzBunch)</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://airbus-seclab.github.io/ilo/SSTIC2018-Slides-EN-Backdooring_your_server_through_its_BMC_the_HPE_iLO4_case-perigaud-gazet-czarny.pdf">Backdooring your server through its BMC: the HPE iLO4 case</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://www.sstic.org/media/SSTIC2018/SSTIC-actes/smart_tvs_security_of_dvb-t/SSTIC2018-Article-smart_tvs_security_of_dvb-t-kasmi_lopes-esteves_claverie.pdf">Smart TVs: Security of DVB-T</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://blog.vdoo.com/2018/06/18/vdoo-discovers-significant-vulnerabilities-in-axis-cameras/">VDOO Discovers Significant Vulnerabilities in Axis Cameras</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://www.acunetix.com/blog/web-security-zone/deserialization-vulnerabilities-attacking-deserialization-in-js/">Deserialization Vulnerabilities: Attacking Deserialization in JS</a></p>
</li>
<li><p class="first"><a class="reference external" href="http://blog.ret2.io/2018/06/19/pwn2own-2018-root-cause-analysis/">Root Cause Analysis of a Non-Deterministic JavaScriptCore Bug</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://www.sec-consult.com/en/blog/2018/06/true-story-the-case-of-a-hacked-baby-monitor-gwelltimes-p2p-cloud/">TRUE STORY: THE CASE OF A HACKED BABY MONITOR (GWELLTIMES P2P CLOUD)</a></p>
</li>
<li><p class="first"><a class="reference external" href="http://j00ru.vexillium.org/papers/2018/bochspwn_reloaded.pdf">Detecting Kernel Memory Disclosure with x86 Emulation and Taint Tracking</a></p>
</li>
</ol>
</div>
<div class="section" id="privacy-links">
<h4>11.9.1.1.5. Privacy links<a class="headerlink" href="#privacy-links" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><a class="reference external" href="https://arstechnica.com/tech-policy/2018/06/verizon-and-att-will-stop-selling-your-phones-location-to-data-brokers/">Verizon and AT&amp;T will stop selling your phone’s location to data brokers</a></li>
<li><a class="reference external" href="`https://www.cnbc.com/2018/06/15/gdpr-emails-going-unopened.html">No one is opening those emails about privacy updates, and marketers are getting nervous</a></li>
<li><a class="reference external" href="https://wojciechregula.blog/your-encrypted-photos-in-macos-cache/">Your encrypted photos revealed in macOS cache</a> and <a class="reference external" href="https://www.bleepingcomputer.com/news/apple/macos-breaks-your-opsec-by-caching-data-from-encrypted-hard-drives/">macOS Breaks Your OpSec by Caching Data From Encrypted Hard Drives</a></li>
<li><a class="reference external" href="https://www.bleepingcomputer.com/news/gaming/gaming-companies-remove-analytics-app-after-massive-user-outcry/">Gaming Companies Remove Analytics App After Massive User Outcry</a></li>
<li><a class="reference external" href="https://techcrunch.com/2018/06/22/facebook-analytics-leak/">Facebook mistakenly leaked developer analytics reports to testers</a></li>
</ol>
</div>
<div class="section" id="cultural-legal-political">
<h4>11.9.1.1.6. Cultural/Legal/Political<a class="headerlink" href="#cultural-legal-political" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><a class="reference external" href="https://www.cnn.com/2018/06/22/politics/supreme-court-ruling-cell-phone/index.html">Supreme Court: Warrant generally needed to track cell phone location data</a> and <a class="reference external" href="https://www.supremecourt.gov/opinions/17pdf/16-402_h315.pdf">CARPENTER v. UNITED STATES</a></li>
<li><a class="reference external" href="https://www.nytimes.com/2018/06/16/sunday-review/why-hackers-arent-afraid-of-us.html">Why Hackers Aren’t Afraid of Us</a></li>
<li><a class="reference external" href="https://www.nytimes.com/2018/06/17/us/politics/cyber-command-trump.html">Pentagon Puts Cyberwarriors on the Offensive, Increasing the Risk of Conflict</a></li>
</ol>
</div>
<div class="section" id="hacking-links">
<h4>11.9.1.1.7. Hacking links<a class="headerlink" href="#hacking-links" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><a class="reference external" href="https://www.symantec.com/blogs/threat-intelligence/thrip-hits-satellite-telecoms-defense-targets">Thrip: Espionage Group Hits Satellite, Telecoms, and Defense Companies</a></li>
<li><a class="reference external" href="https://arstechnica.com/information-technology/2018/06/widely-used-d-link-modemrouter-under-mass-attack-by-potent-iot-botnet/">Widely used D-Link modem/router under mass attack by potent IoT botnet</a></li>
<li><a class="reference external" href="https://thehackernews.com/2018/06/flightradar24-data-breach.html">Popular Flight Tracker Flightradar24 Suffers Data Breach</a></li>
<li><a class="reference external" href="https://thehackernews.com/2018/06/mobile-security-firebase-hosting.html">Thousands of Mobile Apps Expose Their Unprotected Firebase Hosted Databases</a> - “Researchers from mobile security firm Appthority discovered that many app developers’ fail to properly secure their back-end Firebase endpoints with firewalls and authentication, leaving hundreds of gigabytes of sensitive data of their customers publicly accessible to anyone.”</li>
<li><a class="reference external" href="https://www.bleepingcomputer.com/news/security/someone-is-taking-over-insecure-cameras-and-spying-on-device-owners/">Someone Is Taking Over Insecure Cameras and Spying on Device Owners</a></li>
<li><a class="reference external" href="https://www.us-cert.gov/ncas/analysis-reports/AR18-165A">Malware Analysis Report (AR18-165A) - MAR-10135536-12 – North Korean Trojan: TYPEFRAME</a></li>
<li><a class="reference external" href="https://twitter.com/LukasStefanko/status/1006438664342245376">Millions of views on YouTube for fake “How to install Fortnite on Android” videos including links to actual APK files</a></li>
<li><a class="reference external" href="https://arstechnica.com/information-technology/2018/06/hackers-who-sabotaged-the-olympic-games-return-for-more-mischief/">Hackers who sabotaged the Olympic games return for more mischief</a></li>
</ol>
</div>
</div>
</div>
<div class="section" id="study-this-week">
<h2>11.9.2. Study this week<a class="headerlink" href="#study-this-week" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pentesterlab">
<h3>11.9.2.1. PentesterLab<a class="headerlink" href="#pentesterlab" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><a class="reference external" href="https://blog.pentesterlab.com/introducing-pentesterlab-meetup-889e26441211">PentesterLab - Introducing PentesterLab Meetup</a></li>
<li><a class="reference external" href="https://blog.pentesterlab.com/10-common-mistakes-aspiring-new-pentesters-make-b74a81e58934">PentesterLab - 10 common mistakes aspiring/new pentesters make</a></li>
<li><a class="reference external" href="https://pentesterlab.com/bootcamp">PentesterLab - Bootcamp</a></li>
<li><a class="reference external" href="https://pentesterlab.com/exercises?dir=desc&amp;only=free&amp;sort=published_at">PentesterLab - Our exercises</a></li>
<li><a class="reference external" href="https://blog.pentesterlab.com/use-docker-for-your-pentesting-labs-879fe9feeca8">PentesterLab - Use docker for your pentesting labs!</a></li>
</ol>
</div>
<div class="section" id="aws-ec2-instances">
<h3>11.9.2.2. AWS EC2 instances<a class="headerlink" href="#aws-ec2-instances" title="Permalink to this headline">¶</a></h3>
<div class="section" id="on-demand-spot-reserved-and-dedicated-instances">
<h4>11.9.2.2.1. On-demand, spot, reserved, and dedicated instances<a class="headerlink" href="#on-demand-spot-reserved-and-dedicated-instances" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>On-demand</dt>
<dd>Normal EC2 instance available on demand.</dd>
<dt>Spot instance</dt>
<dd>Spare compute capacity available at steep discounts. See <a class="reference external" href="https://aws.amazon.com/ec2/spot/">Amazon EC2 Spot Instances</a>. “The only difference between On-Demand instances and Spot Instances is that Spot instances can be interrupted by EC2 with two minutes of notification when EC2 needs the capacity back.” See <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/spot-interruptions.html#interruption-behavior">Interruption Behavior</a> for interruption options.</dd>
<dt>Reserved instance</dt>
<dd>Get discount by committing to 1 or 3 years instance usage. See <a class="reference external" href="https://aws.amazon.com/ec2/pricing/reserved-instances/">Amazon EC2 Reserved Instances</a>. Standard RIs are for steady state usage; convertible RIs are like standard RIs except they can be upgraded to instances of equal or greater value; and scheduled RIs which have “a predictable recurring schedule that only requires a fraction of a day, a week, or a month.”</dd>
<dt>Dedicated instances</dt>
<dd>Hardware is dedicated to a single customer. See <a class="reference external" href="https://aws.amazon.com/ec2/purchasing-options/dedicated-instances/">Amazon EC2 Dedicated Instances</a> and <a class="reference external" href="https://aws.amazon.com/ec2/dedicated-hosts/">Amazon EC2 Dedicated Hosts</a>.</dd>
</dl>
</div>
<div class="section" id="instance-types">
<h4>11.9.2.2.2. Instance types<a class="headerlink" href="#instance-types" title="Permalink to this headline">¶</a></h4>
<div class="section" id="instance-families">
<h5>11.9.2.2.2.1. Instance families<a class="headerlink" href="#instance-families" title="Permalink to this headline">¶</a></h5>
<p><a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/instance-types.html">Amazon Elastic Compute Cloud Instance Types</a> lists these families: general purpose, compute optimized, memory optimized, storage optimized, and accelerated computing. Also see <a class="reference external" href="https://aws.amazon.com/ec2/instance-types/">Amazon EC2 Instance Types</a>.</p>
</div>
<div class="section" id="virtualization-types">
<h5>11.9.2.2.2.2. Virtualization types<a class="headerlink" href="#virtualization-types" title="Permalink to this headline">¶</a></h5>
<p>From <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/instance-types.html">Amazon Elastic Compute Cloud Instance Types</a>, there are HVM (hardware virtual machine) and PV (paravirtual) instances:</p>
<blockquote>
<div>For best performance, we recommend that you use an HVM AMI. In addition, HVM AMIs are required to take advantage of enhanced networking. HVM virtualization uses hardware-assist technology provided by the AWS platform. With HVM virtualization, the guest VM runs as if it were on a native hardware platform, except that it still uses PV network and storage drivers for improved performance.</div></blockquote>
<p>From <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/virtualization_types.html">Amazon Elastic Compute Cloud - Linux AMI Virutalization Types</a>:</p>
<blockquote>
<div>Paravirtual guests traditionally performed better with storage and network operations than HVM guests because they could leverage special drivers for I/O that avoided the overhead of emulating network and disk hardware, whereas HVM guests had to translate these instructions to emulated hardware. Now PV drivers are available for HVM guests, so operating systems that cannot be ported to run in a paravirtualized environment can still see performance advantages in storage and network I/O by using them. With these PV on HVM drivers, HVM guests can get the same, or better, performance than paravirtual guests.</div></blockquote>
</div>
<div class="section" id="networking">
<h5>11.9.2.2.2.3. Networking<a class="headerlink" href="#networking" title="Permalink to this headline">¶</a></h5>
<p>Networking between instances can be optimized by <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/placement-groups.html">Amazon Elastic Compute Cloud Placement Groups</a>:</p>
<dl class="docutils">
<dt>Cluster</dt>
<dd>Clusters instances into a low-latency group in a single Availability Zone.</dd>
<dt>Spread</dt>
<dd>Spreads instances across underlying hardware. They can span Availability Zones.</dd>
</dl>
<p>Note that <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/enhanced-networking.html">Amazon Elastic Compute Cloud Enhanced Networking on Linux</a> providing 10 or 25 Gbps network speeds is supported on selected instance types.</p>
</div>
<div class="section" id="storage">
<h5>11.9.2.2.2.4. Storage<a class="headerlink" href="#storage" title="Permalink to this headline">¶</a></h5>
<p>See the figure at <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Storage.html">Amazon Elastic Compute Cloud Storage</a>  for the different types of storage.</p>
<dl class="docutils">
<dt>Instance Store</dt>
<dd>Disks physically attached to host computer, with data lost when instance is stopped or terminated. See <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/InstanceStorage.html">Amazon Elastic Compute Cloud Amazon EC2 Instance Store</a>.</dd>
<dt>EBS</dt>
<dd><p class="first">A raw, unformatted external block device that can be attached to a single instance, persisting independently from the instance. EBS volumes can be created as encrypted volumes. See <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AmazonEBS.html">Amazon Elastic Compute Cloud Amazon Elastic Block Store (Amazon EBS)</a>. Can create:</p>
<dl class="docutils">
<dt>General Purpose SSD</dt>
<dd>3 IOPS/GiB with burst to 3,000 IOPS. These “volumes support up to 10,000 IOPS and 160 MB/s throughput”.</dd>
<dt>Provisioned IOPS</dt>
<dd>These “support up to 32,000 IOPS and 500 MB/s throughput”.</dd>
<dt>Throughput Optimized HDD</dt>
<dd>Optimized HDD provides “low-cost magnetic storage that defines performance in terms of throughput rather than IOPS. With throughput of up to 500 MiB/s.”</dd>
<dt>Cold HDD</dt>
<dd>Magnetic storage up to 250 MiB/s.</dd>
</dl>
<p class="last">These can be encrypted, can create point-in-time snapshot, are create in an Availability Zone for instances in the same Availability Zone. They can be initialized with public data sets (see <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-public-data-sets.html">Amazon Elastic Compute Cloud Using Public Data Sets</a>).</p>
</dd>
<dt>EFS</dt>
<dd>NFS storage. See <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AmazonEFS.html">Amazon Elastic Compute Cloud Amazon Elastic File System (Amazon EFS)</a>.</dd>
<dt>S3</dt>
<dd>Reliable and inexpensive storage, including snapshots and AMIs.</dd>
</dl>
</div>
<div class="section" id="root-device">
<h5>11.9.2.2.2.5. Root device<a class="headerlink" href="#root-device" title="Permalink to this headline">¶</a></h5>
<p>All AMIs are either backed by EBS or instance store. See <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ComponentsAMIs.html#storage-for-the-root-device">Amazon Elastic Compute Cloud AMI Types - Storage for the Root Device</a>. Note that all of the lesser cost T2 instances must use EBS for instance storage. Also see <a class="reference external" href="https://docs.aws.amazon.com/opsworks/latest/userguide/best-practices-storage.html">AWS OpsWorks Best Practices: Root Device Storage for Instances</a>: EBS instances restart faster, EBS-backed instances pay for the EBS volume even when the instance is not running, and logs on EBS-backed instance persist with the volume.</p>
</div>
<div class="section" id="bursting">
<h5>11.9.2.2.2.6. Bursting<a class="headerlink" href="#bursting" title="Permalink to this headline">¶</a></h5>
<div class="section" id="cpu-bursting">
<h6>11.9.2.2.2.6.1. CPU bursting<a class="headerlink" href="#cpu-bursting" title="Permalink to this headline">¶</a></h6>
<p>From <a class="reference external" href="https://aws.amazon.com/ec2/instance-types/#burst">Burstable Performance Instances</a>
<a class="reference external" href="https://aws.amazon.com/ec2/instance-types/#burst">Burstable Performance Instances</a>:</p>
<blockquote>
<div><p>Amazon EC2 allows you to choose between Fixed Performance Instances (e.g. M3, C3, and R3) and Burstable Performance Instances (e.g. T2). Burstable Performance Instances provide a baseline level of CPU performance with the ability to burst above the baseline.</p>
<p>The hourly T2 instance price automatically covers all interim spikes in usage when the average CPU utilization of a T2 instance is at or less than the baseline over a 24-hour window. If the instance needs to run at higher CPU utilization for a prolonged period, it can do so at a flat additional charge of 5 cents per vCPU-hour.</p>
<p>T2 instances’ baseline performance and ability to burst are governed by CPU Credits. Each T2 instance receives CPU Credits continuously, the rate of which depends on the instance size. T2 instances accrue CPU Credits when they are idle, and use CPU credits when they are active. A CPU Credit provides the performance of a full CPU core for one minute.</p>
<p>For example, a t2.small instance receives credits continuously at a rate of 12 CPU Credits per hour. This capability provides baseline performance equivalent to 20% of a CPU core (20% x 60 mins = 12 mins). If the instance does not use the credits it receives, they are stored in its CPU Credit balance up to a maximum of 288 CPU Credits. When the t2.small instance needs to burst to more than 20% of a core, it draws from its CPU Credit balance to handle this surge automatically.</p>
<p>If the instance happens to run at an average 25% CPU utilization (5% above baseline) over a period of 24 hours after its CPU Credit balance is drawn to zero, it will be charged an additional 6 cents (5 cents/vCPU-hour x 1 vCPU x 5% x 24 hours).</p>
</div></blockquote>
<p>See <a class="reference external" href="https://www.algotech.solutions/blog/engineering/how-powerful-are-the-burstable-aws-t2-instances/">How powerful are the burstable aws t2 instances</a> for an example of burstable t2 instance usage.</p>
<p>See <a class="reference external" href="https://roberttisdale.com/aws-ec2-t2-instances-demystified-dont-learn-hard-way/">AWS EC2 T2 Instances Demystified: Don’t Learn The Hard Way</a> for more discussion of T2 bursting. To allow unlimited bursting requires specifying <code class="docutils literal notranslate"><span class="pre">--credit-specification</span> <span class="pre">CpuCredits=unlimited</span></code> like <code class="docutils literal notranslate"><span class="pre">aws</span> <span class="pre">ec2</span> <span class="pre">run-instances</span> <span class="pre">...</span> <span class="pre">--credit-specification</span> <span class="pre">CpuCredits=unlimited</span></code>.</p>
</div>
<div class="section" id="ssd-bursting">
<h6>11.9.2.2.2.6.2. SSD bursting<a class="headerlink" href="#ssd-bursting" title="Permalink to this headline">¶</a></h6>
<p>From <a class="reference external" href="https://aws.amazon.com/blogs/aws/new-ssd-backed-elastic-block-storage/">New SSD-Backed Elastic Block Storage: Under the Hood - Performance Burst Details</a>, the token bucket implementations works as follows:</p>
<ul class="simple">
<li>Token is I/O credit for 1 read or write.</li>
<li>Token bucket for each general purpose SSD holding up to 5.4 million tokens.</li>
<li>Add 3 tokens/GB/second.</li>
<li>Tokens spent up to 3000/second/volume.</li>
<li>Baseline performance is 3 IOPS/GB/second.</li>
</ul>
<p>For a more detailed discussion see burst and credit discussions in <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSVolumeTypes.html">Amazon Elastic Compute Cloud Amazon EBS Volume Types</a> and the presentation <a class="reference external" href="https://www.slideshare.net/rasmusekman/aws-an-introduction-to-bursting-gp2-t2">AWS - an introduction to bursting (GP2 - T2)</a>.</p>
</div>
</div>
</div>
</div>
<div class="section" id="aws-cli">
<h3>11.9.2.3. AWS CLI<a class="headerlink" href="#aws-cli" title="Permalink to this headline">¶</a></h3>
<div class="section" id="installing-configuring-the-aws-cli">
<h4>11.9.2.3.1. Installing/configuring the AWS CLI<a class="headerlink" href="#installing-configuring-the-aws-cli" title="Permalink to this headline">¶</a></h4>
<p>See <a class="reference external" href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-getting-started.html">Configuring the AWS CLI</a>. Installation and configuration can be as simple as:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="hll">pip install --upgrade awscli
</span>
<span class="hll">aws configure
</span>AWS Access Key ID <span class="o">[</span>None<span class="o">]</span>: AKIAIOSFODNN7EXAMPLE
AWS Secret Access Key <span class="o">[</span>None<span class="o">]</span>: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
Default region name <span class="o">[</span>None<span class="o">]</span>: us-west-2
Default output format <span class="o">[</span>None<span class="o">]</span>: ENTER

<span class="hll">aws configure list
</span><span class="hll">aws configure get region
</span></pre></div>
</div>
</div>
<div class="section" id="regions-and-azs">
<h4>11.9.2.3.2. Regions and AZs<a class="headerlink" href="#regions-and-azs" title="Permalink to this headline">¶</a></h4>
<p>Instances are created in an Availability Zone using <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AMIs.html">Amazon Elastic Compute Cloud Amazon Machine Images (AMI)</a>. From <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instances-and-amis.html">Amazon Elastic Compute Cloud Instances and AMIs</a>:</p>
<blockquote>
<div>All AMIs are categorized as either backed by Amazon EBS, which means that the root device for an instance launched from the AMI is an Amazon EBS volume, or backed by instance store, which means that the root device for an instance launched from the AMI is an instance store volume created from a template stored in Amazon S3.</div></blockquote>
<p>From <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-regions-availability-zones.html">Amazon Elastic Compute Cloud Regions and Availability Zones</a>:</p>
<blockquote>
<div><p>An Availability Zone is represented by a region code followed by a letter identifier; for example, us-east-1a. To ensure that resources are distributed across the Availability Zones for a region, we independently map Availability Zones to identifiers for each account. For example, your Availability Zone us-east-1a might not be the same location as us-east-1a for another account. There’s no way for you to coordinate Availability Zones between accounts.</p>
<p>When you launch an instance, you can optionally specify an Availability Zone in the region that you are using. If you do not specify an Availability Zone, we select one for you. When you launch your initial instances, we recommend that you accept the default Availability Zone, because this enables us to select the best Availability Zone for you based on system health and available capacity. If you launch additional instances, only specify an Availability Zone if your new instances must be close to, or separated from, your running instances.</p>
</div></blockquote>
<p>Not all regions or AZs have the same capability: <a class="reference external" href="https://docs.aws.amazon.com/general/latest/gr/rande.html">AWS Regions and Endpoints</a> shows Amazon Translate endpoints only exist in 4 regions where Amazon VPC exist in many more.</p>
<p>Note that EBS storage is in an AZ, instances run in an AZ using EBS in that AZ, and use an AMI in the same region (not AZ).</p>
<p>Here are some AWS CLI commands involving regions and AZ. (Note: see <a class="reference external" href="https://askubuntu.com/questions/53582/how-do-i-know-what-ubuntu-ami-to-launch-on-ec2#53586">How do I know what Ubuntu AMI to launch on EC2?</a>.)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="c1"># Get complete region list, then current region and AZs</span>
</span>aws ec2 describe-regions --output text  <span class="c1"># or &quot;table&quot;, &quot;json&quot;</span>
aws configure get region
<span class="nv">REGION</span><span class="o">=</span><span class="k">$(</span>aws configure get region<span class="k">)</span>
aws ec2 describe-availability-zones

<span class="hll"><span class="c1"># Get Ubuntu 18.04 LTS from Ubuntu for current region</span>
</span>remove_last_comma<span class="o">()</span> <span class="o">{</span> sed <span class="s1">&#39;</span>
<span class="s1">        $x;$G;/\(.*\),/!H;//!{$!d</span>
<span class="s1">    };  $!x;$s//\1/;s/^\n//&#39;</span>
<span class="o">}</span>
curl -s <span class="s2">&quot;https://cloud-images.ubuntu.com/locator/ec2/releasesTable&quot;</span> <span class="se">\</span>
    <span class="p">|</span> remove_last_comma <span class="se">\</span>
    <span class="p">|</span> jq -c <span class="s1">&#39;.aaData[] | select(contains([&quot;18.04&quot;, &quot;&#39;</span><span class="nv">$REGION</span><span class="s1">&#39;&quot;, &quot;hvm:ebs&quot;]))&#39;</span> <span class="se">\</span>
    <span class="p">|</span> grep -o <span class="s1">&#39;ami-[a-z0-9]\+&#39;</span> <span class="p">|</span> head -1

<span class="hll"><span class="c1"># Get Ubuntu 18.04 LTS for current region from AWS</span>
</span>aws --region <span class="s2">&quot;</span><span class="nv">$REGION</span><span class="s2">&quot;</span> ec2 describe-images --owners <span class="m">099720109477</span> <span class="se">\</span>
    --filters <span class="nv">Name</span><span class="o">=</span>root-device-type,Values<span class="o">=</span>ebs <span class="se">\</span>
              <span class="nv">Name</span><span class="o">=</span>architecture,Values<span class="o">=</span>x86_64 <span class="se">\</span>
              <span class="nv">Name</span><span class="o">=</span>name,Values<span class="o">=</span><span class="s1">&#39;*hvm-ssd/ubuntu-bionic-18.04*&#39;</span> <span class="se">\</span>
    --query <span class="s1">&#39;sort_by(Images, &amp;Name)[-1].ImageId&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="ssh-keys">
<h4>11.9.2.3.3. SSH keys<a class="headerlink" href="#ssh-keys" title="Permalink to this headline">¶</a></h4>
<p>See <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html">Amazon Elastic Compute Cloud Amazon EC2 Key Pairs</a> for options creating an SSH key pair. Note that SSH keys are stored in a region (using the current default region if not specified). If AWS creates the SSH key pair it returns the private key and keeps the public key. If you create your own SSH key pair you keep both and upload your public key - AWS never touches your private key.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="c1"># Generate SSH keypair</span>
</span><span class="nv">EMAIL</span><span class="o">=</span><span class="s2">&quot;bitbender@bitbender.org&quot;</span>
<span class="nv">KEYNAME</span><span class="o">=</span>bitbender
<span class="nv">PRIVKEY</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/.ssh/id_aws&quot;</span>
<span class="nv">PUBKEY</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$PRIVKEY</span><span class="s2">.pub&quot;</span>
<span class="c1"># NOTE - ed25519 doesn&#39;t work</span>
<span class="c1"># ssh-keygen -a 50 -t ed25519 -C &quot;$EMAIL&quot; -f &quot;$PRIVKEY&quot;</span>
ssh-keygen -o -t rsa -C <span class="s2">&quot;</span><span class="nv">$EMAIL</span><span class="s2">&quot;</span> -f <span class="s2">&quot;</span><span class="nv">$PRIVKEY</span><span class="s2">&quot;</span>
<span class="c1"># password protect the key</span>

<span class="hll"><span class="c1"># Import into current region</span>
</span>aws ec2 import-key-pair --key-name <span class="s2">&quot;</span><span class="nv">$KEYNAME</span><span class="s2">&quot;</span> <span class="se">\</span>
    --public-key-material <span class="s2">&quot;file://</span><span class="nv">$PUBKEY</span><span class="s2">&quot;</span>

<span class="hll"><span class="c1"># Verify keys uploaded</span>
</span>aws ec2 describe-key-pairs

<span class="hll"><span class="c1"># If need to delete the key</span>
</span>aws ec2 delte-key-pair --key-name <span class="s2">&quot;</span><span class="nv">$KEYNAME</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="run-ec2-instance">
<h4>11.9.2.3.4. Run EC2 instance<a class="headerlink" href="#run-ec2-instance" title="Permalink to this headline">¶</a></h4>
<p>Here’s an example of starting an EC2 instance using the AWS CLI:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="c1"># Info needed to create EC2 instance</span>
</span><span class="nv">TYPE</span><span class="o">=</span>t2.nano  <span class="c1"># t2.nano t2.micro t2.small t2.medium</span>
<span class="hll"><span class="c1"># Region will default, but we&#39;ll set it here and let AWS choose AZ</span>
</span><span class="nv">REGION</span><span class="o">=</span><span class="k">$(</span>aws configure get region<span class="k">)</span>
<span class="hll"><span class="c1"># Use SSH key created previously</span>
</span><span class="nv">KEYNAME</span><span class="o">=</span><span class="s2">&quot;bitbender&quot;</span>
<span class="nv">PRIVKEY</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/.ssh/id_aws&quot;</span>
<span class="hll"><span class="c1"># Use Ubuntu 18.04 AMI</span>
</span><span class="nv">AMI</span><span class="o">=</span><span class="k">$(</span>aws --region <span class="s2">&quot;</span><span class="nv">$REGION</span><span class="s2">&quot;</span> ec2 describe-images --owners <span class="m">099720109477</span> <span class="se">\</span>
          --filters <span class="nv">Name</span><span class="o">=</span>root-device-type,Values<span class="o">=</span>ebs <span class="se">\</span>
                    <span class="nv">Name</span><span class="o">=</span>architecture,Values<span class="o">=</span>x86_64 <span class="se">\</span>
                    <span class="nv">Name</span><span class="o">=</span>name,Values<span class="o">=</span><span class="s1">&#39;*hvm-ssd/ubuntu-bionic-18.04*&#39;</span> <span class="se">\</span>
          --query <span class="s1">&#39;sort_by(Images, &amp;Name)[-1].ImageId&#39;</span> <span class="se">\</span>
    <span class="k">)</span>
<span class="hll"><span class="c1"># Create security group and get security group ID</span>
</span><span class="nv">SG</span><span class="o">=</span><span class="s2">&quot;PENTEST_MEETUP&quot;</span>
<span class="nv">SGID</span><span class="o">=</span><span class="k">$(</span>aws ec2 create-security-group <span class="se">\</span>
           --group-name <span class="s2">&quot;</span><span class="nv">$SG</span><span class="s2">&quot;</span> --description <span class="s2">&quot;Test Security Group&quot;</span> <span class="se">\</span>
     <span class="k">)</span>
<span class="c1"># sg-cbc2c5ba</span>
<span class="c1"># Alternatively could query for security group ID</span>
<span class="nv">SGID</span><span class="o">=</span><span class="k">$(</span>aws ec2 describe-security-groups <span class="se">\</span>
           --group-names <span class="s2">&quot;</span><span class="nv">$SG</span><span class="s2">&quot;</span> <span class="se">\</span>
           --query <span class="s1">&#39;SecurityGroups[*].{ID:GroupId}&#39;</span> <span class="se">\</span>
     <span class="k">)</span>
<span class="hll"><span class="c1"># Allow SSH in security group</span>
</span>aws ec2 authorize-security-group-ingress --group-id <span class="s2">&quot;</span><span class="nv">$SGID</span><span class="s2">&quot;</span> <span class="se">\</span>
    --protocol tcp --port <span class="m">22</span> --cidr <span class="m">0</span>.0.0.0/0 --region <span class="s2">&quot;</span><span class="nv">$REGION</span><span class="s2">&quot;</span>

<span class="hll"><span class="c1"># Run the instance and tag it with name &quot;pentest-meetup&quot;</span>
</span><span class="nv">VMNAME</span><span class="o">=</span><span class="s2">&quot;pentest-meetup&quot;</span>
aws ec2 run-instances --image-id <span class="s2">&quot;</span><span class="nv">$AMI</span><span class="s2">&quot;</span> --count <span class="m">1</span> <span class="se">\</span>
    --instance-type <span class="s2">&quot;</span><span class="nv">$TYPE</span><span class="s2">&quot;</span> --key-name <span class="s2">&quot;</span><span class="nv">$KEYNAME</span><span class="s2">&quot;</span> <span class="se">\</span>
    --security-group-ids <span class="s2">&quot;</span><span class="nv">$SGID</span><span class="s2">&quot;</span> --region <span class="s2">&quot;</span><span class="nv">$REGION</span><span class="s2">&quot;</span> <span class="se">\</span>
    --tag-specifications <span class="s1">&#39;ResourceType=instance,Tags=[{Key=Name,Value=&#39;</span><span class="nv">$VMNAME</span><span class="s1">&#39;}]&#39;</span>

<span class="hll"><span class="c1"># Get the instance ID</span>
</span><span class="nv">INSTANCES</span><span class="o">=</span><span class="k">$(</span>aws ec2 describe-instances <span class="se">\</span>
               --filters <span class="s1">&#39;Name=tag:Name,Values=pentest-meetup&#39;</span> <span class="se">\</span>
               --query <span class="s1">&#39;Reservations[*].Instances[*].InstanceId&#39;</span> <span class="se">\</span>
               --output text <span class="se">\</span>
          <span class="k">)</span>
<span class="hll"><span class="c1"># Get the public DNS name</span>
</span><span class="nv">PUBDNS</span><span class="o">=</span><span class="k">$(</span>aws ec2 describe-instances <span class="se">\</span>
           --filters <span class="s1">&#39;Name=tag:Name,Values=pentest-meetup&#39;</span> <span class="se">\</span>
           --query <span class="s1">&#39;Reservations[*].Instances[*].PublicDnsName&#39;</span> <span class="se">\</span>
           --output text <span class="se">\</span>
     <span class="k">)</span>
<span class="hll"><span class="c1"># Wait for instance running</span>
</span>aws ec2 <span class="nb">wait</span> instance-running --instance-ids <span class="s2">&quot;</span><span class="nv">$INSTANCES</span><span class="s2">&quot;</span>

<span class="hll"><span class="c1"># Use the VM</span>
</span>ssh -i <span class="s2">&quot;</span><span class="nv">$PRIVKEY</span><span class="s2">&quot;</span> ubuntu@<span class="nv">$PUBDNS</span>
<span class="c1"># See instance metadata and user data</span>
curl http://169.254.169.254/latest/meta-data/
curl http://169.254.169.254/latest/user-data
<span class="c1"># ...</span>
<span class="nb">exit</span>

<span class="hll"><span class="c1"># Terminate the VM and remove security group</span>
</span>aws ec2 terminate-instances --instance-ids <span class="s2">&quot;</span><span class="nv">$INSTANCES</span><span class="s2">&quot;</span> --region <span class="s2">&quot;</span><span class="nv">$REGION</span><span class="s2">&quot;</span>
aws ec2 delete-security-group --group-id <span class="s2">&quot;</span><span class="nv">$SGID</span><span class="s2">&quot;</span> --region <span class="s2">&quot;</span><span class="nv">$REGION</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>See <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AccessingInstancesLinux.html">Amazon Elastic Compute Cloud Connecting to Your Linux Instance Using SSH</a> for SSH details.</p>
</div>
<div class="section" id="launch-templates">
<h4>11.9.2.3.5. Launch templates<a class="headerlink" href="#launch-templates" title="Permalink to this headline">¶</a></h4>
<p>From <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-launch-templates.html">Amazon Elastic Compute Cloud Launching an Instance from a Launch Template</a>:</p>
<blockquote>
<div>Launch templates enable you to store launch parameters so that you do not have to specify them every time you launch an instance. For example, a launch template can contain the AMI ID, instance type, and network settings that you typically use to launch instances. When you launch an instance using the Amazon EC2 console, an AWS SDK, or a command line tool, you can specify the launch template to use.</div></blockquote>
<p>That document include an example of overriding the template:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>aws ec2 run-instances <span class="se">\</span>
    --launch-template <span class="nv">LaunchTemplateId</span><span class="o">=</span>lt-0abcd290751193123 <span class="se">\</span>
    --instance-type t2.small
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="20180616_presentation.html" class="btn btn-neutral float-right" title="11.10. 2018-06-16 Links, VMs/Containers, and AES/SHA" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="20180630_presentation.html" class="btn btn-neutral" title="11.8. 2018-06-30 Links, home routers, PentesterLab SQLi" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, bitbender.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0.3',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>