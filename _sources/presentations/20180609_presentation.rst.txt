.. include:: /pentest_links.txt


**************************************************
2018-06-09 Links, VMs/Containers, and Cryptography
**************************************************


Links and updates this week
===========================


Links around the web
--------------------


Cloud
^^^^^

#. `How IPv6 deployment is growing in U.S. and other countries <https://code.facebook.com/posts/635039943508824/how-ipv6-deployment-is-growing-in-u-s-and-other-countries/>`_

#. `Using VPC Flow Logs <https://cloud.google.com/vpc/docs/using-flow-logs>`_

#. `Introducing Asylo: an open-source framework for confidential computing <https://cloudplatform.googleblog.com/2018/05/Introducing-Asylo-an-open-source-framework-for-confidential-computing.html>`_

   `Asylo Quickstart Guide <https://asylo.dev/docs/guides/quickstart.html>`_

   `Asylo - An open and flexible framework for enclave applications <https://github.com/google/asylo>`_

   `Asylo - Welcome <https://asylo.dev/docs/>`_

#. `Google’s free wifi is becoming a way of life in India <https://qz.com/1300522/googles-free-wifi-at-railway-stations-is-a-way-of-life-for-8-million-indians/>`_


Tech
^^^^

#. `INSIDE FIREFOX’S DOH ENGINE <https://daniel.haxx.se/blog/2018/06/03/inside-firefoxs-doh-engine/>`_

#. `US Government Probes Airplane Vulnerabilities, Says Airline Hack Is ‘Only a Matter of Time’ <https://motherboard.vice.com/en_us/article/d3kwzx/documents-us-government-hacking-planes-dhs>`_

#. `Microsoft Adds Post-Quantum Cryptography to an OpenVPN Fork <https://www.bleepingcomputer.com/news/microsoft/microsoft-adds-post-quantum-cryptography-to-an-openvpn-fork/>`_ and `Welcome to the PQCrypto-VPN project! <https://github.com/Microsoft/PQCrypto-VPN>`_


Tools
^^^^^

#. `Update Google Chrome Immediately to Patch a High Severity Vulnerability <https://thehackernews.com/2018/06/google-chrome-csp.html>`_

#. `Top 6 web frameworks for Go as of 2017 <https://blog.usejournal.com/top-6-web-frameworks-for-go-as-of-2017-23270e059c4b>`_

#. `The State of Developer Ecosystem in 2018 <https://www.jetbrains.com/research/devecosystem-2018/>`_ and `Report: The top three programming languages of 2018 are Java, JavaScript and Python <https://sdtimes.com/softwaredev/report-the-top-three-programming-languages-of-2018-are-java-javascript-and-python/>`_

#. `Command and Control – Browser <https://pentestlab.blog/2018/06/06/command-and-control-browser/>`_

#. `ME Analyzer <https://github.com/platomav/MEAnalyzer>`_ - ME Analyzer is a tool which parses Intel Engine & PMC firmware images

#. `Archery <https://github.com/archerysec/archerysec>`_ - an opensource vulnerability assessment and management tool which helps developers and pentesters to perform scans and manage vulnerabilities

#. `Introduction to the Nikto Web Application Vulnerability Scanner <https://resources.infosecinstitute.com/introduction-nikto-web-application-vulnerability-scanner/>`_

#. `Microsoft Publishes Massive 948-Page PDF With Every Windows Terminal Command You Could Ever Need <https://www.lifehacker.com.au/2018/05/microsoft-publishes-massive-948-page-pdf-with-every-windows-terminal-command-you-could-ever-need/>`_

#. `CHIPSEC: Platform Security Assessment Framework <https://github.com/chipsec/chipsec>`_

#. `Tor - Fusion Project overview <https://trac.torproject.org/projects/tor/wiki/org/meetings/2018Rome/Notes/FusionProject>`_ - Tor-based private mode (`Security/Fusion <https://wiki.mozilla.org/Security/Fusion>`_ says Fusion = Firefox USIng ONions)

#. `WebAssembly Studio <https://webassembly.studio/>`_ and `Sneak Peek at WebAssembly Studio <https://hacks.mozilla.org/2018/04/sneak-peek-at-webassembly-studio/?sample_rate=0.001&snippet_name=8301>`_

#. `otseca (Ot)her (Sec)urity (A)wareness <https://github.com/trimstray/otseca>`_

#. `WhaleTail <https://github.com/P3GLEG/WhaleTail>`_


Study links
^^^^^^^^^^^

#. `The Seven Properties of Highly Secure Devices <https://www.microsoft.com/en-us/research/publication/seven-properties-highly-secure-devices/>`_ and `The Seven Properties of Highly Secure Devices pdf paper <https://www.microsoft.com/en-us/research/wp-content/uploads/2017/03/SevenPropertiesofHighlySecureDevices.pdf>`_

#. `Blockchain's Once-Feared 51% Attack Is Now Becoming Regular <http://telegra.ph/Blockchains-Once-Feared-51-Attack-Is-Now-Becoming-Regular-06-08>`_ and `51% attack <https://en.bitcoinwiki.org/wiki/51%25_attack>`_

#. `OPERATION PROWLI: MONETIZING 40,000 VICTIM MACHINES <https://www.guardicore.com/2018/06/operation-prowli-traffic-manipulation-cryptocurrency-mining/>`_

#. `Life as a GitHub Intern: What laser cutting taught me about contribution graphs <https://blog.github.com/2018-06-07-what-laser-cutting-taught-me-about-contribution-graphs/>`_, `Puppeteer <https://github.com/GoogleChrome/puppeteer>`_, and `Glitch - Puppeteer sample <https://glitch.com/~puppeteer-sample>`_

#. `ADOBE FLASH ZERO-DAY LEVERAGED FOR TARGETED ATTACK IN MIDDLE EAST <https://www.icebrg.io/blog/adobe-flash-zero-day-targeted-attack>`_

#. `Steam, Fire, and Paste – A Story of UXSS via DOM-XSS & Clickjacking in Steam Inventory Helper <https://thehackerblog.com/steam-fire-and-paste-a-story-of-uxss-via-dom-xss-clickjacking-in-steam-inventory-helper/index.html>`_

#. `VPNFilter Update - VPNFilter exploits endpoints, targets new devices <https://blog.talosintelligence.com/2018/06/vpnfilter-update.html>`_ and `VPNFilter malware infecting 500,000 devices is worse than we thought <https://arstechnica.com/information-technology/2018/06/vpnfilter-malware-infecting-50000-devices-is-worse-than-we-thought/>`_

#. `Reading Your Emails With A Read&Write Chrome Extension Same Origin Policy Bypass (~8 Million Users Affected) <https://thehackerblog.com/reading-your-emails-with-a-readwrite-chrome-extension-same-origin-policy-bypass-8-million-users-affected/index.html>`_

#. `Beware of strncpy() and strncat() <https://eklitzke.org/beware-of-strncpy-and-strncat>`_

#. `A Methodical Approach to Browser Exploitation <https://blog.ret2.io/2018/06/05/pwn2own-2018-exploit-development/>`_

#. `"Hey Mycroft, we've got a Problem" <https://github.com/Nhoya/MycroftAI-RCE>`_

#. `Zip Slip Vulnerability <https://snyk.io/research/zip-slip-vulnerability>`_ and `snyk - Zip Slip <https://res.cloudinary.com/snyk/image/upload/v1528192501/zip-slip-vulnerability/technical-whitepaper.pdf>`_

#. `PentesterLab <https://pentesterlab.com/>`_ and `PentesterLab PRO <https://pentesterlab.com/pro>`_

#. `CORS <https://frontendian.co/cors>`_

#. `data-serialization <https://enqueuezero.com/data-serialization.html>`_

#. `Java: Exploiting your "unreachable" JRMP/RMI/JMX endpoints [CVE-2018-2800] <https://mbechler.github.io/2018/05/21/Java-CVE-2018-2800/>`_

#. `Are Your Cookies Telling Your Fortune? <https://file.digitalinterruption.com/Are_Your_Cookies_Telling_Your_Fortune.pdf>`_

#. `CVE-2018-11235 git RCE <https://staaldraad.github.io/post/2018-06-03-cve-2018-11235-git-rce/>`_

#. `SoC it to EM: electromagnetic side-channel attacks on a complex system-on-chip <https://www.iacr.org/archive/ches2015/92930599/92930599.pdf>`_

#. `Misusing debugfs for In-Memory RCE <https://nbulischeck.io/posts/misusing-debugfs-for-in-memory-rce>`_

#. `Iron Cybercrime Group Under The Scope <https://www.intezer.com/iron-cybercrime-group-under-the-scope-2/>`_

#. `Best Practices With CSS Grid Layout <https://www.smashingmagazine.com/2018/04/best-practices-grid-layout/>`_

#. `F-Secure Anti-Virus: Remote Code Execution via Solid RAR Unpacking <https://landave.io/2018/06/f-secure-anti-virus-remote-code-execution-via-solid-rar-unpacking/>`_

#. `Major Vulnerabilities in Foscam Cameras <https://blog.vdoo.com/2018/06/06/vdoo-has-found-major-vulnerabilities-in-foscam-cameras/>`_

#. `Awk - A useful little language <https://dev.to/rrampage/awk---a-useful-little-language-2fhf>`_


Privacy links
^^^^^^^^^^^^^

#. `Improve Your Privacy in the Age of Mass Surveillance <https://iotdarwinaward.com/post/improve-your-privacy-in-age-of-mass-surveillance/>`_

#. `Have a confidential news tip for Ars Technica? <https://arstechnica.com/news-tips/>`_

#. `Bye, Chrome: Why I’m switching to Firefox and you should too <https://www.fastcodesign.com/90174010/bye-chrome-why-im-switching-to-firefox-and-you-should-too>`_

#. `Facebook alerts 14M to privacy bug that changed status composer to public <https://techcrunch.com/2018/06/07/facebook-status-privacy-bug/>`_

#. `Facebook gave firms broad access to data on users, friends: report <http://thehill.com/policy/technology/390500-facebook-gave-companies-broad-access-to-data-on-users-friends-report>`_

#. `Google Cloud - Sole-tenant nodes <https://cloud.google.com/compute/docs/nodes/>`_ and `Amazon Elastic Compute Cloud - Dedicated Instance <https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/dedicated-instance.html>`_


Cultural/Legal/Political
^^^^^^^^^^^^^^^^^^^^^^^^

#. `In seconds, we faked our way into a political campaign, got unsecured voter data <https://arstechnica.com/tech-policy/2018/06/campaigns-are-totally-reckless-with-voter-data-activist-tells-ars/>`_

#. `Governor’s office is “stonewalling” lawsuit over Confide use, lawyer tells judge <https://arstechnica.com/tech-policy/2018/06/disgraced-ex-governor-still-faces-lawsuit-over-alleged-use-of-ephemeral-messaging/>`_ - use of encrypted, ephemeral communications can skirt public records laws

   `Mueller checks witnesses’ phones for secure messaging apps, per report <https://arstechnica.com/tech-policy/2018/06/report-special-counsel-asks-if-witnesses-are-using-secure-messaging-apps/>`_

#. `[PATCH v2 0/5] crypto: Speck support <https://www.spinics.net/lists/linux-crypto/msg33291.html>`_

   I'd like to say that the NSA has done quite extensive work in muddying the waters, arguing that Simon & Speck are secure and that all objections are political. This is not true, as I will now show with examples. The bottom line is that there are still many open questions about their security, questions that the NSA has, on multiple occasions, refused to answer.

#. `Apple Is Testing a Feature That Could Kill Police iPhone Unlockers <https://motherboard.vice.com/en_us/article/zm8ya4/apple-iphone-usb-restricted-mode-cellebrite-grayshift>`_ and `Motherboard - Phone Crackers <https://motherboard.vice.com/en_us/topic/phone-crackers>`_

#. `Spies win right to keep monitoring all traffic at world's biggest internet hub <https://www.zdnet.com/article/spies-win-right-to-keep-monitoring-all-traffic-at-worlds-biggest-internet-hub/>`_

#. `Wi-Fi phishing attacks discovered around Atlanta City Hall <https://www.helpnetsecurity.com/2018/06/08/wi-fi-phishing-attacks/>`_

#. `1 June 2018 (Commercial surveillance of individuals) <https://stallman.org/archives/2018-mar-jun.html#1_June_2018_(Commercial_surveillance_of_individuals)>`_

   By arguing about whether to divide up the power that this data gives to businesses, or to regulate the use of it (perhaps nationalizing it), they miss the point that `both alternatives destroy our privacy <https://gnu.org/philosophy/surveillance-vs-democracy.html>`_ and give the state a perfect basis for repression.

   The danger is to collect that data at all.

#. `Everyone complaining about Microsoft buying GitHub needs to offer a better solution <https://arstechnica.com/gadgets/2018/06/everyone-complaining-about-microsoft-buying-github-needs-to-offer-a-better-solution/>`_

   #. `Microsoft unveils new effort to make its developer, IT documentation great again <https://arstechnica.com/information-technology/2016/05/microsoft-unveils-new-effort-to-make-its-developer-it-documentation-great-again/>`_ - Markdown

      #. `GitHub - Microsoft Docs <https://github.com/MicrosoftDocs>`_

      #. `Microsoft Docs <https://docs.microsoft.com/en-us/>`_

   #. `AWS Documentation is Now Open Source and on GitHub <https://aws.amazon.com/blogs/aws/aws-documentation-is-now-open-source-and-on-github/>`_ - typically Markdown or reStructuredText

      #. `GitHub - Amazon Web Services - Documentation <https://github.com/awsdocs>`_

      #. `AWS Documentation <https://aws.amazon.com/documentation/>`_

   #. `Why You Shouldn’t Use “Markdown” for Documentation <http://ericholscher.com/blog/2016/mar/15/dont-use-markdown-for-technical-docs/>`_

#. `Tactics of Israeli Psy-Group, Black Cube Revealed in Canadian Court Battle <https://www.calcalistech.com/ctech/articles/0,7340,L-3739390,00.html>`_

#. `Facebook Accused of Giving Over 60 Device-Makers Deep Access to User Data <https://thehackernews.com/2018/06/facebook-data-privacy.html>`_ and `Facebook gave some developers access to users' friends after policy changed <https://www.usatoday.com/story/tech/2018/06/08/facebook-gave-some-companies-special-access-data-users-friends-report/686651002/>`_

#. `China has turned Xinjiang into a police state like no other <https://www.economist.com/briefing/2018/05/31/china-has-turned-xinjiang-into-a-police-state-like-no-other>`_

#. `China hacked sensitive U.S. Navy undersea warfare plans: Washington Post <https://www.reuters.com/article/us-usa-china-cyber/china-hacked-sensitive-us-navy-undersea-warfare-plans-washington-post-idUSKCN1J42MM>`_


Hacking links
^^^^^^^^^^^^^

#. `Cisco Removes Backdoor Account, Fourth in the Last Four Months <https://www.bleepingcomputer.com/news/security/cisco-removes-backdoor-account-fourth-in-the-last-four-months/>`_

#. `Some Signal Disappearing Messages Are Not Disappearing <https://motherboard.vice.com/en_us/article/bj3pxd/signal-disappearing-messages-not-disappearing>`_

#. `TSB admits 1,300 accounts hit by fraud amid IT meltdown <https://www.bbc.com/news/business-44385710>`_

#. `Hacker Defaces Ticketfly’s Website, Steals Customer Database <https://motherboard.vice.com/en_us/article/mbk3nx/ticketfly-website-database-hacked-data-breach>`_

   #. `Ticketfly Cyber Incident Update <https://support.ticketfly.com/customer/portal/articles/2941983-ticketfly-cyber-security-update>`_

      We’re rolling out a secure website solution as an alternative to your Ticketfly-powered site to meet your immediate needs. We’ve built a secure, non-WordPress based website solution with your existing domain, and your site will appear sometime today.

   #. `Ticketfly Says 27 Million Accounts Compromised During 'Malicious' Attack <https://www.billboard.com/articles/business/8459831/ticketfly-hack-27-million-accounts-accessed-malicious-cyber-attack-details>`_

   #. `How to protect yourself from megabreaches like the one that hit Ticketfly <https://arstechnica.com/information-technology/2018/06/how-to-protect-yourself-from-megabreaches-like-the-one-that-hit-ticketfly/>`_

#. `Firmware Vulnerabilities Disclosed in Supermicro Server Products <https://www.bleepingcomputer.com/news/security/firmware-vulnerabilities-disclosed-in-supermicro-server-products/>`_

#. `92 million MyHeritage users had their data quietly swiped <https://arstechnica.com/tech-policy/2018/06/92-million-myheritage-users-had-their-data-quietly-swiped/>`_ and `MyHeritage Statement About a Cybersecurity Incident <https://blog.myheritage.com/2018/06/myheritage-statement-about-a-cybersecurity-incident/>`_

#. `Stymied by browsers, attackers embed Flash 0-day inside MS Office document <https://arstechnica.com/information-technology/2018/06/stymied-by-browsers-attackers-embed-flash-0day-inside-ms-office-document/>`_

#. `Three months later, a mass exploit of powerful Web servers continues <https://arstechnica.com/information-technology/2018/06/three-months-later-a-mass-exploit-of-powerful-web-servers-continues/>`_


Study this week
===============


Cheap VMs
---------


Approaches to lower cost vs convenience
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Google makes it cheap to run a "part time" VM:

* Disk storage is charged as long as the VM exists.

* CPU billing is only charged when the VM runs, with a minimum of 1 minute and by the second after that.

* VM picks up where it left off - not like a new VM. Kinda like a spare desktop you boot when needed.

So running a 3.75 GB VM 7x24 is $24.27/month, but running it 8 hours/day 5 days/week is only $8.26/month. If you can get by with a 1.7 GB VM the cost goes down to $4.69/month.

But what about other providers that charge even when a VM is powered off? You can get around that by using persistent block storage to save state between VM creation, combined with your own images having pre-installed software.

Let's take the example of Linode. You can create a 10 GB presistent block storage device to persist state. Linode also offers a limited number of small images you can create and use for new VMs. (Alternatively Linode StackScripts can be used to configure the VM on boot). The 10 GB storage costs $0.10/GB/month or $1/month. A 4 GB VM costs $0.03/hour: 8 hours/day 5 days/week is only $6.30/month, while a 1 GB VM costs $2.32/month. Note that Linode pricing is rounded up to the next hour.

The Linode approach has the advantage of switching VM sizes as needed, with the disadvantage of longer startup due to the extra configuration. Plus the pricing is rounded up to the next hour vs to the second. But don't spend too much time worrying about pennies when you should make sure to use the right cloud provider: if all your work is on AWS it make sense to use that to hone your skills there.


Example on Linode
^^^^^^^^^^^^^^^^^

Let's assume we launch the Linode VM using the linode-cli in Google Cloud Shell:

.. code-block:: bash
  :emphasize-lines: 1

  # One-time create python3 environment for the Google Cloud Shell
  mkdir ~/py3
  python3 -m venv ~/py3
  pip install -U pip
  pip install -U linode-cli
  echo 'source ~/py3/bin/activate' >> ~/.profile
  source ~/py3/bin/activate

From the Google Cloud Shell create the VM:

.. code-block:: bash
  :emphasize-lines: 1,8,13,18,20

  # Get the region and volume id of the pre-configured block storage DATA
  # VMs must be in same region as block storage
  VOLUME="DATA"
  REGION=$(linode-cli volumes list --text --no-header --format 'region' --label "$VOLUME")
  #REGION=us-west
  VOLID=$(linode-cli volumes list --text --no-header --format 'id' --label "$VOLUME")
  #VOLID=7742

  # Get the image for the VM
  IMAGE=$( linode-cli images list --text --no-header --delimiter ';' --format 'id,label' | \
      grep '^private' | grep '18.04' | head -n 1 | cut -f1 -d ';')
  #IMAGE=private/3989799

  # Create the VM
  VM=compute
  MYPASS=aSecretPassword
  linode-cli linodes create --type g6-nanode-1 --region $REGION --image $IMAGE --label $VM --root_pass "$MYPASS"
  VMID=$(linode-cli linodes list --label $VM --text --no-header --format 'id')
  # Attach the block storage
  linode-cli volumes attach $VOLID --linode_id $VMID
  # Get the IP
  IP=$(linode-cli linodes list --label $VM --text --no-header --format 'ipv4')
  echo ssh into $IP

At this point wait a bit, then ssh into the instance to attach the block storage (need decryption key) and login to Google Cloud Platform:

.. code-block:: bash
  :emphasize-lines: 1,7,11,16,20

  # Setup encrypted block storage
  DEVICE=/dev/disk/by-id/scsi-0Linode_Volume_DATA
  NAME=DATA
  sudo cryptsetup open $DEVICE $NAME
  # Enter password

  # Mount block storage (already in /etc/fstab)
  MP=/mnt/disks/$NAME
  sudo mount $MP

  # Copy config files from block storage
  ( cd /mnt/disks/DATA/backup/config
  cp -r .aws .emacs .gsutil jgm_priv.asc jgm_pub.asc .ssh .tmux .tmux.conf .vimrc bin ~/ )
  export PATH=$PATH:$HOME/bin

  # Authenticate to Google Cloud Platform
  gcloud auth login
  # User browser to login

  # Set GCP project
  gcloud config set project bitbender.org:bitbender

Now do whatever work is needed. When done, unmount block storage:

.. code-block:: bash

  cd
  sudo umount $MP
  sudo cryptsetup close $NAME

Then from the Google Cloud Console:

.. code-block:: bash

  linode-cli linodes shutdown $VMID
  linode-cli volumes detach $VOLID
  linode-cli linodes delete $VMID


Containers
----------


Learning containers
^^^^^^^^^^^^^^^^^^^

#. `Compare Docker for Windows options <https://sreeninet.wordpress.com/2017/05/13/docker-for-windows-different-modes/>`_


Container repositories
^^^^^^^^^^^^^^^^^^^^^^

#. `Comparing Four Hosted Docker Registries <https://rancher.com/comparing-four-hosted-docker-registries/>`_ - Docker Hub, quay.io, Artifactory, and Google Container Registry

#. `Amazon Elastic Container Registry <https://aws.amazon.com/ecr/>`_ and `Amazon Elastic Container Registry Pricing <https://aws.amazon.com/ecr/pricing/>`_

#. `Docker Hub <https://hub.docker.com/>`_ and `Docker Hub - Billing Information & Pricing Plans <https://hub.docker.com/billing-plans/>`_

#. `Microsoft Azure - Container Registry <https://azure.microsoft.com/en-us/services/container-registry/?cdn=disable>`_ and `Microsoft Azure - Container Registry Pricing <https://azure.microsoft.com/en-us/pricing/details/container-registry/>`_

#. `Google Cloud - Container Registry <https://cloud.google.com/container-registry/>`_, `Google Cloud - Container Registry Pricing <https://cloud.google.com/container-registry/pricing>`_, and `Google Cloud - Cloud Storage Pricing <https://cloud.google.com/storage/pricing>`_



Building containers
^^^^^^^^^^^^^^^^^^^

#. `Google Cloud - CONTAINER BUILDER <https://cloud.google.com/container-builder/>`_ - 120 free build-minutes per day, most users are able to move their builds to the cloud at no cost, with none of the overhead of managing your own build servers

   `Overview of Container Builder <https://cloud.google.com/container-builder/docs/overview>`_


DNSSEC
------

Please see :ref:`dns_sec` for a DNS security discussion.

Also these links:

#. `Introducing DNS Resolver for Tor <https://blog.cloudflare.com/welcome-hidden-resolver/>`_

#. `A cartoon intro to DNS over HTTPS <https://hacks.mozilla.org/2018/05/a-cartoon-intro-to-dns-over-https/>`_ - see *How can DNS be exploited?*
