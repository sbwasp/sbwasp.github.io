

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta content="default-src 'none'; script-src 'self' https://cdnjs.cloudflare.com 'unsafe-inline'; connect-src 'self'; img-src 'self'; style-src 'self'; font-src 'self'; form-action 'self'; frame-ancestors 'none'; base-uri 'self'" http-equiv="Content-Security-Policy" />
<meta content="nosniff" http-equiv="X-Content-Type-Options" />
<meta content="deny" http-equiv="X-Frame-Options" />
<meta content="1; mode=block" http-equiv="X-XSS-Protection" />
<meta content="strict-origin" http-equiv="Referrer-Policy" />
<meta content="max-age=31536000; includeSubDomains" http-equiv="Strict-Transport-Security" />
<meta content="'*'" http-equiv="Access-Control-Allow-Origin" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>8.18. Static websites &mdash; South Bay WASP 1.0.3 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="8.19. Virtualization &amp; networking" href="virtualization_networking.html" />
    <link rel="prev" title="8.17. PHP &amp; MySQL Shortcomings" href="php.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> South Bay WASP
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../pentest_intro.html">1. South Bay WASP Meetup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pentest_kali.html">2. Kali Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pentest_challenges.html">3. Pentest Challenges</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pentest_encryption.html">4. Encryption</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pentest_html.html">5. HTML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pentest_network_tools.html">6. Pentest Network Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pentest_recon.html">7. Pentest Reconnaisance</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../pentest_study.html">8. Pentest Study</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="2factor.html">8.1. 2 Factor Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.html">8.2. Cryptography</a></li>
<li class="toctree-l2"><a class="reference internal" href="dnssec.html">8.3. DNSSEC, DANE, and DNS encryption</a></li>
<li class="toctree-l2"><a class="reference internal" href="email_security.html">8.4. Email Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="exfiltration.html">8.5. Exfiltration</a></li>
<li class="toctree-l2"><a class="reference internal" href="exiftool.html">8.6. <strong class="program">exiftool</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="fw.html">8.7. Firewalls</a></li>
<li class="toctree-l2"><a class="reference internal" href="ipv6.html">8.8. IPv6</a></li>
<li class="toctree-l2"><a class="reference internal" href="loadlibrary.html">8.9. loadlibrary</a></li>
<li class="toctree-l2"><a class="reference internal" href="linux_exploitation_tricks.html">8.10. Linux Exploitation Tricks</a></li>
<li class="toctree-l2"><a class="reference internal" href="linux_networking.html">8.11. Linux networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="llmnr.html">8.12. Windows broadcast name resolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="nftables.html">8.13. nftables</a></li>
<li class="toctree-l2"><a class="reference internal" href="not_getting_hacked.html">8.14. Not getting hacked</a></li>
<li class="toctree-l2"><a class="reference internal" href="ntlm.html">8.15. NTLM</a></li>
<li class="toctree-l2"><a class="reference internal" href="passwords.html">8.16. Password Cracking Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="php.html">8.17. PHP &amp; MySQL Shortcomings</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">8.18. Static websites</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-is-a-static-website">8.18.1. What is a static website?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#static-vs-dynamic-websites">8.18.1.1. Static vs dynamic websites</a></li>
<li class="toctree-l4"><a class="reference internal" href="#advantages-of-static-websites">8.18.1.2. Advantages of static websites</a></li>
<li class="toctree-l4"><a class="reference internal" href="#creating-static-websites">8.18.1.3. Creating static websites</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hosting-a-static-website">8.18.1.4. Hosting a static website</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#statically-hosting-this-website">8.18.2. Statically hosting this website</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#creating-content-using-sphinx">8.18.2.1. Creating content using Sphinx</a></li>
<li class="toctree-l4"><a class="reference internal" href="#publishing-content-on-google-app-engine">8.18.2.2. Publishing content on Google App Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="#publishing-content-on-amazon-s3-cloudfront">8.18.2.3. Publishing content on Amazon S3 &amp; CloudFront</a></li>
<li class="toctree-l4"><a class="reference internal" href="#publishing-content-on-github-io">8.18.2.4. Publishing content on github.io</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="virtualization_networking.html">8.19. Virtualization &amp; networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="vulnerabilities.html">8.20. Vulnerabilites</a></li>
<li class="toctree-l2"><a class="reference internal" href="waf.html">8.21. WAF Evasion</a></li>
<li class="toctree-l2"><a class="reference internal" href="wifi.html">8.22. WiFi Tutorial</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../pentest_buffer_overflow.html">9. Pentest Buffer Overflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pentest_scripting.html">10. Pentest scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pentest_presentations.html">11. Pentest Presentations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">South Bay WASP</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../pentest_study.html">8. Pentest Study</a> &raquo;</li>
        
      <li>8.18. Static websites</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/study/static_websites.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="static-websites">
<span id="id21"></span><h1>8.18. Static websites<a class="headerlink" href="#static-websites" title="Permalink to this headline">¶</a></h1>
<p>This serves both as an introduction to static websites and to the currently 3 different locations publishing this static web content. This should not be taken as a complete introduction to static websites, but enough to understand how this website is published. It also is not meant to be read as much as demonstrated live.</p>
<div class="section" id="what-is-a-static-website">
<h2>8.18.1. What is a static website?<a class="headerlink" href="#what-is-a-static-website" title="Permalink to this headline">¶</a></h2>
<div class="section" id="static-vs-dynamic-websites">
<h3>8.18.1.1. Static vs dynamic websites<a class="headerlink" href="#static-vs-dynamic-websites" title="Permalink to this headline">¶</a></h3>
<p>A static website:</p>
<ul class="simple">
<li>No server-side processing<ul>
<li>But client-side processing<ul>
<li>For example, this website has a client-based search capability</li>
</ul>
</li>
</ul>
</li>
<li>Server-side data is “fixed”<ul>
<li>But can vary over time</li>
<li>Can be served from a <a class="reference external" href="https://en.wikipedia.org/wiki/Content_delivery_network">Content delivery network</a> allowing the website to inexpensively scale to massive traffic volume</li>
</ul>
</li>
<li>Generally every user sees the same web content<ul>
<li>Client-side processing can discriminate between clients</li>
</ul>
</li>
<li>Can link to dynamic content provided by 3rd party</li>
</ul>
<p>Dynamic websites generally need server-side processing and some form of non-client processing/storage.</p>
</div>
<div class="section" id="advantages-of-static-websites">
<h3>8.18.1.2. Advantages of static websites<a class="headerlink" href="#advantages-of-static-websites" title="Permalink to this headline">¶</a></h3>
<p>Compared to a dynamic website:</p>
<ul class="simple">
<li>Blazingly fast</li>
<li>Much easier to scale to massive traffic</li>
<li>Very cheap to run</li>
<li>Easy to version control (via Git)</li>
<li>Generally more secure (public website that doesn’t do much)</li>
<li>Easier to protect from DDoS</li>
<li>Can use 3rd party sites to add dynamic content (from <a class="reference external" href="https://www.webceo.com/blog/static-website-vs-dynamic-website-which-is-better-for-seo/">Static Website vs Dynamic Website: Which Is Better for SEO?</a>)<ul>
<li>Free Google search</li>
<li>Comments via <a class="reference external" href="https://help.disqus.com/customer/portal/articles/1104788-web-integration">Discus</a></li>
<li>Shopping via <a class="reference external" href="https://www.ecwid.com/">Ecwid</a>, <a class="reference external" href="https://snipcart.com/">Snipcart</a></li>
<li>Webforms via <a class="reference external" href="https://formspree.io/">Formspree</a>, Google Forms or <a class="reference external" href="https://www.wufoo.com/">Wufoo</a></li>
</ul>
</li>
<li>Can be good for <a class="reference external" href="https://en.wikipedia.org/wiki/Search_engine_optimization">Search engine optimization</a></li>
</ul>
<p>On the negative side:</p>
<ul class="simple">
<li>Difficult to generate complex web pages<ul>
<li>But from <a class="reference external" href="https://www.webceo.com/blog/static-website-vs-dynamic-website-which-is-better-for-seo/">Static Website vs Dynamic Website: Which Is Better for SEO?</a> can use CMS systems <a class="reference external" href="https://www.surrealcms.com/">Surreal CMS</a>, <a class="reference external" href="https://forestry.io/">Forestry.io</a> or <a class="reference external" href="http://prose.io/">Prose</a></li>
</ul>
</li>
<li>Not dynamic</li>
<li>Generally don’t discriminate between users</li>
</ul>
</div>
<div class="section" id="creating-static-websites">
<h3>8.18.1.3. Creating static websites<a class="headerlink" href="#creating-static-websites" title="Permalink to this headline">¶</a></h3>
<p>For a list of static website generators see <a class="reference external" href="https://www.staticgen.com/">StaticGen - Top Open-Source Static Site Generators</a> and <a class="reference external" href="https://www.netlify.com/blog/2016/05/02/top-ten-static-website-generators/">Top Ten Static Website Generators</a>. The creators of GitHub developed <a class="reference external" href="https://jekyllrb.com/">jekyll - Transform your plain text into static websites and blogs</a> so it has the number one position on StaticGen.</p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Comparison_of_documentation_generators">Comparison of documentation generators</a> lists a number of tools including <a class="reference external" href="https://en.wikipedia.org/wiki/Sphinx_(documentation_generator)">Wikipedia - Sphinx</a> which is used by this website. See <a class="reference external" href="http://sphinx-doc.org/">Sphinx</a> to learn how to use Sphinx, and browse <a class="reference external" href="https://readthedocs.org/">Read the Docs</a> for website hosting Sphinx-generated documentation.</p>
</div>
<div class="section" id="hosting-a-static-website">
<h3>8.18.1.4. Hosting a static website<a class="headerlink" href="#hosting-a-static-website" title="Permalink to this headline">¶</a></h3>
<p>Start with <a class="reference external" href="https://www.slant.co/topics/2256/~static-website-hosting-provider">What is the best static website hosting provider?</a></p>
<p>Static websites can be hosted from cloud storage:</p>
<ul class="simple">
<li><a class="reference external" href="https://cloud.google.com/storage/docs/static-website">Google Cloud Platform - Static Website Examples, Troubleshooting and Tips</a></li>
<li><a class="reference external" href="http://docs.aws.amazon.com/AmazonS3/latest/dev/WebsiteHosting.html">Hosting a Static Website on Amazon S3</a></li>
<li><a class="reference external" href="https://d1.awsstatic.com/whitepapers/Storage/Building%20Static%20Websites%20on%20AWS.pdf">Hosting Static Websites on AWS</a></li>
<li><a class="reference external" href="https://www.microsoft.com/middleeast/azureboxes/cloud-hosting-for-a-static-website.aspx">Azure Boxes - Cloud hosting for a static website</a></li>
</ul>
<p>Static content can also be hosted other places:</p>
<ul class="simple">
<li>This website is hosted on <a class="reference external" href="https://cloud.google.com/appengine/">Google App Engine</a> (see <a class="reference external" href="https://cloud.google.com/appengine/docs/">Google App Engine Documentation</a> and <a class="reference external" href="https://cloud.google.com/appengine/docs/the-appengine-environments">Choosing an App Engine Environment</a>)</li>
<li><a class="reference external" href="https://firebase.google.com/docs/hosting/quickstart">Firebase</a> is another option (see <a class="reference external" href="https://www.brooks-patton.com/deploying-a-static-website-to-firebase/">Deploying a static website to Firebase</a>)</li>
<li><a class="reference external" href="https://pages.github.com/">GitHub Pages</a></li>
<li><a class="reference external" href="https://readthedocs.org/">Read the Docs</a></li>
</ul>
<p>Each of these static hosting options can be fronted by a CDN like Cloudflare:</p>
<ul class="simple">
<li>See <a class="reference external" href="https://support.cloudflare.com/hc/en-us/articles/200168926-How-do-I-use-Cloudflare-with-Amazon-s-S3-Service-">How do I use Cloudflare with Amazon’s S3 Service?</a> and <a class="reference external" href="https://wsvincent.com/static-site-hosting-with-s3-and-cloudflare/">Static Site Hosting with S3 and CloudFlare</a></li>
<li><a class="reference external" href="https://blog.cloudflare.com/secure-and-fast-github-pages-with-cloudflare/">Secure and fast GitHub Pages with CloudFlare</a></li>
</ul>
</div>
</div>
<div class="section" id="statically-hosting-this-website">
<h2>8.18.2. Statically hosting this website<a class="headerlink" href="#statically-hosting-this-website" title="Permalink to this headline">¶</a></h2>
<div class="section" id="creating-content-using-sphinx">
<h3>8.18.2.1. Creating content using Sphinx<a class="headerlink" href="#creating-content-using-sphinx" title="Permalink to this headline">¶</a></h3>
<p>Much of the Sphinx content can be viewed on the website by clicking the “View page source” link at the upper right of each page. The complete Sphinx source is in a private <a class="reference external" href="https://bitbucket.org/">Bitbucket</a> repository. Here is the directory structure:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="gp">hacker@kali:pentest$</span> tree -d -L <span class="m">2</span> pentest-meetup
</span><span class="hll"><span class="go">pentest-meetup                = git repository</span>
</span><span class="hll"><span class="go">├── build</span>
</span><span class="go">│   ├── doctrees</span>
<span class="go">│   ├── epub                  = epub version</span>
<span class="hll"><span class="go">│   ├── html                  = website content to publish</span>
</span><span class="go">│   └── latex                 = pdf version</span>
<span class="hll"><span class="go">└── source                    = content to edit, sections follow</span>
</span><span class="go">    ├── buffer_overflow</span>
<span class="go">    ├── challenges</span>
<span class="go">    ├── encryption</span>
<span class="go">    ├── html</span>
<span class="go">    ├── kali</span>
<span class="go">    ├── network_tools</span>
<span class="go">    ├── presentations</span>
<span class="go">    ├── recon</span>
<span class="go">    ├── scripting</span>
<span class="go">    ├── _static</span>
<span class="go">    └── study</span>
</pre></div>
</div>
<p>Building the html, serving it, then getting ready to publish it is easy:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># To serve the html content locally</span>
<span class="hll">make html<span class="p">;</span> <span class="o">(</span> <span class="nb">cd</span> build/html<span class="p">;</span> python3 -m httpd.server <span class="o">)</span>
</span><span class="c1"># To view it:</span>
<span class="c1">#   firefox http://localhost:8000</span>
<span class="c1"># To build the content to publish (including epub and pdf versions)</span>
<span class="hll">make clean html epub latexpdf
</span></pre></div>
</div>
</div>
<div class="section" id="publishing-content-on-google-app-engine">
<h3>8.18.2.2. Publishing content on Google App Engine<a class="headerlink" href="#publishing-content-on-google-app-engine" title="Permalink to this headline">¶</a></h3>
<p>A makefile is used to copy the Sphinx <code class="file docutils literal notranslate"><span class="pre">html</span></code> directory to the <code class="file docutils literal notranslate"><span class="pre">deploy</span></code> directory for publishing to Google App Engine:</p>
<div class="highlight-make notranslate"><div class="highlight"><pre><span></span><span class="c"># Makefile for Sphinx documentation</span>
<span class="c">#</span>

<span class="c"># You can set these variables from the command line.</span>
<span class="hll"><span class="nv">DEPLOY</span>           <span class="o">=</span> deploy
</span><span class="hll"><span class="nv">SOURCE</span>           <span class="o">=</span> ../pentest-meetup/build
</span>
<span class="nf">.PHONY</span><span class="o">:</span> <span class="n">help</span> <span class="n">clean</span> <span class="n">copy</span> <span class="n">appserver</span> <span class="n">appupdate</span>

<span class="nf">help</span><span class="o">:</span>
        @echo <span class="s2">&quot;Please use &#39;make &lt;target&gt;&#39; where &lt;target&gt; is one of&quot;</span>
        @echo <span class="s2">&quot;  clean to delete the build directory contents&quot;</span>
        @echo <span class="s2">&quot;  appserver to run localhost gae server on new build directory&quot;</span>
        @echo <span class="s2">&quot;  appupdate  to upload the app to GAE&quot;</span>

<span class="hll"><span class="nf">clean</span><span class="o">:</span>
</span>        mkdir -p <span class="k">$(</span>DEPLOY<span class="k">)</span>
        rm -rf <span class="k">$(</span>DEPLOY<span class="k">)</span>/*

<span class="hll"><span class="nf">copy</span><span class="o">:</span>
</span>        mkdir -p <span class="k">$(</span>DEPLOY<span class="k">)</span>
        rm -rf <span class="k">$(</span>DEPLOY<span class="k">)</span>/*
<span class="hll">        cp main.py <span class="k">$(</span>DEPLOY<span class="k">)</span>
</span><span class="hll">        cp app.yaml <span class="k">$(</span>DEPLOY<span class="k">)</span>
</span>        cp robots.txt <span class="k">$(</span>DEPLOY<span class="k">)</span>
        cp <span class="k">$(</span>SOURCE<span class="k">)</span>/latex/SouthBayWASP.pdf <span class="k">$(</span>DEPLOY<span class="k">)</span>
        cp <span class="k">$(</span>SOURCE<span class="k">)</span>/epub/SouthBayWASP.epub <span class="k">$(</span>DEPLOY<span class="k">)</span>
        <span class="nb">cd</span> <span class="k">$(</span>DEPLOY<span class="k">)</span><span class="p">;</span> ln -s  ../<span class="k">$(</span>SOURCE<span class="k">)</span>/html .<span class="p">;</span> <span class="nb">cd</span> -

<span class="hll"><span class="nf">appserver</span><span class="o">:</span> <span class="n">copy</span>
</span>        <span class="nb">cd</span> <span class="k">$(</span>DEPLOY<span class="k">)</span><span class="p">;</span> dev_appserver.py app.yaml

<span class="hll"><span class="nf">appupdate</span><span class="o">:</span> <span class="n">copy</span>
</span>        <span class="nb">cd</span> <span class="k">$(</span>DEPLOY<span class="k">)</span><span class="p">;</span> gcloud app deploy app.yaml --project<span class="o">=</span>pentest-meetup --version<span class="o">=</span><span class="m">1</span> --promote --quiet
</pre></div>
</div>
<p>You can see that the Sphinx <code class="file docutils literal notranslate"><span class="pre">html</span></code> directory is used along with <code class="file docutils literal notranslate"><span class="pre">robots.txt</span></code> and copies of the pdf and epub versions of the site. Since Google App Engine is a PaaS server, <strong class="program">main.py</strong> and <strong class="program">app.yaml</strong> are needed to run the website.</p>
<p>Then to publish the web content on Google App Engine:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="hll">make appupdate
</span></pre></div>
</div>
</div>
<div class="section" id="publishing-content-on-amazon-s3-cloudfront">
<h3>8.18.2.3. Publishing content on Amazon S3 &amp; CloudFront<a class="headerlink" href="#publishing-content-on-amazon-s3-cloudfront" title="Permalink to this headline">¶</a></h3>
<p>Publishing to Amazon S3 is quite simple and is essentially syncing the Sphinx <code class="file docutils literal notranslate"><span class="pre">html</span></code> directory while preserving a few S3-only files (<code class="file docutils literal notranslate"><span class="pre">403.html</span></code>, <code class="file docutils literal notranslate"><span class="pre">404.html</span></code>, <code class="file docutils literal notranslate"><span class="pre">robots.txt</span></code>) and insuring the epub and pdf copies are up-to-date.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="gp">hacker@kali:pentest-meetup-aws$</span> cat changes.sh
</span><span class="gp">#</span>!/usr/bin/env bash

<span class="go">NAME=&quot;SouthBayWASP&quot;</span>
<span class="hll"><span class="go">PT=~/Persistent/pentest/pentest-meetup</span>
</span><span class="hll"><span class="go">WEB=~/Persistent/pentest/pentest-meetup-aws/deploy</span>
</span><span class="go">OPTION=&#39;-x &#39;</span>
<span class="go">X=&quot; ${OPTION}.well-known ${OPTION}403.html ${OPTION}404.html ${OPTION}.buildinfo ${OPTION}robots.txt ${OPTION}${NAME}.pdf ${OPTION}${NAME}.epub &quot;</span>
<span class="go">OPTION=&#39;--exclude=&#39;</span>
<span class="go">XX=&quot; ${OPTION}.well-known ${OPTION}403.html ${OPTION}404.html ${OPTION}.buildinfo ${OPTION}robots.txt ${OPTION}${NAME}.pdf ${OPTION}${NAME}.epub &quot;</span>
<span class="hll"><span class="go">diff -qr $X $PT/build/html/  $WEB/</span>
</span><span class="hll"><span class="go">cd $PT/build/html</span>
</span><span class="hll"><span class="go">rsync --delete -azv $XX . $WEB</span>
</span><span class="gp">#</span> rsync --dry-run --delete -azv <span class="nv">$XX</span> <span class="nv">$PT</span>/build/html/* <span class="nv">$WEB</span>/
<span class="hll"><span class="go">diff -q $PT/build/latex/${NAME}.pdf  $WEB/${NAME}.pdf</span>
</span><span class="go">[[ $? -ne 0 ]] &amp;&amp; cp $PT/build/latex/${NAME}.pdf  $WEB/</span>
<span class="hll"><span class="go">diff -q $PT/build/epub/${NAME}.epub  $WEB/${NAME}.epub</span>
</span><span class="go">[[ $? -ne 0 ]] &amp;&amp; cp $PT/build/epub/${NAME}.epub  $WEB/</span>
</pre></div>
</div>
<p>To push the <code class="file docutils literal notranslate"><span class="pre">deploy</span></code> directory to S3 via:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="gp">hacker@kali:pentest-meetup-aws$</span> cat publish.sh
</span><span class="gp">#</span>!/usr/bin/env bash

<span class="go">AWSPROFILE=&quot;--profile marengo&quot;</span>
<span class="go">REGION=&quot;us-west-2&quot;</span>
<span class="gp">#</span><span class="nv">BUCKET</span><span class="o">=</span><span class="s2">&quot;s3://pentest-meetup.marengosystems.org&quot;</span>
<span class="go">BUCKET=&quot;s3://pentest-meetup&quot;</span>
<span class="go">DEPLOY=deploy</span>
<span class="go">FLAGS=&quot;--region $REGION --delete&quot;</span>
<span class="gp">#</span> cache-control
<span class="gp">#</span> see https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9.1
<span class="gp">#</span> <span class="nv">public</span> <span class="o">=</span> can be cached and displayed to any user.
<span class="gp">#</span> no-cache <span class="o">=</span> can be cached, but must check origin <span class="k">for</span> changes.
<span class="gp">#</span> max-age <span class="o">=</span> max <span class="nb">time</span> cached before check.
<span class="gp">#</span> For this website, make public with <span class="m">12</span> hour max-age.
<span class="go">CACHE=&#39;--cache-control &quot;public,max-age=43200&quot;&#39;</span>
<span class="go">CACHE=&#39;--cache-control &quot;public,max-age=3600&quot;&#39;</span>
<span class="hll"><span class="go">echo aws s3 sync $DEPLOY $BUCKET $FLAGS $CACHE $AWSPROFILE</span>
</span></pre></div>
</div>
<p>CloudFront is configured to serve content from the S3 bucket <code class="file docutils literal notranslate"><span class="pre">s3://pentest-meetup</span></code>.</p>
</div>
<div class="section" id="publishing-content-on-github-io">
<h3>8.18.2.4. Publishing content on github.io<a class="headerlink" href="#publishing-content-on-github-io" title="Permalink to this headline">¶</a></h3>
<p>Publishing the content to <a class="reference external" href="https://sbwasp.github.io">https://sbwasp.github.io</a> is similar to AWS S3 (except a <code class="file docutils literal notranslate"><span class="pre">.nojekyll</span></code> file is added).</p>
<p>There is a similar <strong class="program">changes.sh</strong> script used:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="gp">hacker@kali:pentest-meetup-github$</span> cat changes.sh
</span><span class="gp">#</span>!/usr/bin/env bash

<span class="go">NAME=&quot;SouthBayWASP&quot;</span>
<span class="hll"><span class="go">PT=~/Persistent/pentest/pentest-meetup</span>
</span><span class="hll"><span class="go">WEB=~/Persistent/pentest/pentest-meetup-github/deploy</span>
</span><span class="go">OPTION=&#39;-x &#39;</span>
<span class="go">X=&quot; ${OPTION}.well-known ${OPTION}403.html ${OPTION}404.html ${OPTION}.buildinfo ${OPTION}robots.txt ${OPTION}${NAME}.pdf ${OPTION}${NAME}.epub &quot;</span>
<span class="go">OPTION=&#39;--exclude=&#39;</span>
<span class="go">XX=&quot; ${OPTION}.well-known ${OPTION}403.html ${OPTION}404.html ${OPTION}.buildinfo ${OPTION}robots.txt ${OPTION}${NAME}.pdf ${OPTION}${NAME}.epub &quot;</span>
<span class="hll"><span class="go">diff -qr $X $PT/build/html/  $WEB/</span>
</span><span class="hll"><span class="go">cd $PT/build/html</span>
</span><span class="hll"><span class="go">rsync --delete -azv $XX . $WEB</span>
</span><span class="gp">#</span> rsync --dry-run --delete -azv <span class="nv">$XX</span> <span class="nv">$PT</span>/build/html/* <span class="nv">$WEB</span>/
<span class="hll"><span class="go">diff -q $PT/build/latex/${NAME}.pdf  $WEB/${NAME}.pdf</span>
</span><span class="hll"><span class="go">[[ $? -ne 0 ]] &amp;&amp; cp $PT/build/latex/${NAME}.pdf  $WEB/</span>
</span><span class="hll"><span class="go">diff -q $PT/build/epub/${NAME}.epub  $WEB/${NAME}.epub</span>
</span><span class="hll"><span class="go">[[ $? -ne 0 ]] &amp;&amp; cp $PT/build/epub/${NAME}.epub  $WEB/</span>
</span><span class="hll"><span class="go">cd -</span>
</span><span class="hll"><span class="go">touch deploy/.nojekyll</span>
</span><span class="hll"><span class="go">rm -rf deploy/.well-known/</span>
</span></pre></div>
</div>
<p>To publish the website to GitHub Pages:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set up the deploy directory</span>
<span class="hll">./changes.sh
</span>
<span class="hll"><span class="c1"># Use git to detect and upload changes.</span>
</span><span class="c1"># Start with the latest site ...</span>
<span class="hll">rm -rf sbwasp.github.io
</span><span class="hll">git clone git@github.com:sbwasp/sbwasp.github.io.git
</span><span class="c1"># SSH key password</span>
<span class="hll"><span class="nb">cd</span> sbwasp.github.io
</span><span class="c1"># Delete the existing content then add in the new content.</span>
<span class="hll">rm -rf *
</span><span class="hll">cp -r ../deploy/* .
</span><span class="c1"># Let git figure out what&#39;s changed.</span>
<span class="hll">git add .
</span><span class="hll">git commit -m <span class="s1">&#39;YYYYMMDD - reason for update&#39;</span>
</span><span class="hll">git push
</span><span class="c1"># SSH key password</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="virtualization_networking.html" class="btn btn-neutral float-right" title="8.19. Virtualization &amp; networking" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="php.html" class="btn btn-neutral" title="8.17. PHP &amp; MySQL Shortcomings" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, bitbender.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0.3',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>